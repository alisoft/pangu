__NUXT_JSONP__("/migration/module-authors", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw){return {data:[{page:{key:"content:en:migration:20.module-authors.md",generatedAt:new Date(1658637023931),mtime:new Date(1658637023904),slug:"module-authors",title:C,position:"999900200000",to:"\u002Fmigration\u002Fmodule-authors",draft:q,page:r,language:"en",head:{title:"Nuxt 2 to Nuxt 3: Modules",titleTemplate:s},empty:q,description:s,excerpt:I,body:{raw:"---\nhead.title: 'Nuxt 2 to Nuxt 3: Modules'\nhead.titleTemplate: ''\n---\n\n# Modules\n\n## Module Compatibility\n\nNuxt 3 has a basic backward compatibility layer for Nuxt 2 modules using `@nuxt\u002Fkit` auto wrappers. But there are usually steps to follow to make modules compatible with Nuxt 3 and sometimes, using Nuxt Bridge is required for cross-version compatibility.\n\nWe have prepared a [Dedicated Guide](\u002Fguide\u002Fgoing-further\u002Fmodules) for authoring Nuxt 3 ready modules using `@nuxt\u002Fkit`. Currently best migration path is to follow it and rewrite your modules. Rest of this guide includes preparation steps if you prefer to avoid a full rewrite yet making modules compatible with Nuxt 3.\n\n::alert\nYou can check for a list of Nuxt 3 ready modules from [Nuxt Modules](https:\u002F\u002Fmodules.nuxtjs.org\u002F?version=3.x).\n::\n\n### Plugin Compatibility\n\nNuxt 3 plugins are **not** fully backward compatible with Nuxt 2.\n\n### Vue Compatibility\n\nPlugins or components using the Composition API need exclusive Vue 2 or Vue 3 support.\n\nBy using [vue-demi](https:\u002F\u002Fgithub.com\u002Fvueuse\u002Fvue-demi) they should be compatible with both Nuxt 2 and 3.\n\n## Module Migration\n\nWhen Nuxt 3 users add your module, a compatible module container layer from `@nuxt\u002Fkit` is **automatically injected**, so as long as your code is following the guidelines below, it should continue working as-is.\n\n### Test with `@nuxt\u002Fbridge`\n\nMigrating to `@nuxt\u002Fbridge` is the first and most important step for supporting Nuxt 3.\n\nIf you have a fixture or example in your module, add `@nuxt\u002Fbridge` package to its config (see [example](\u002Fbridge#update-nuxtconfig))\n\n### Migrate from CommonJS to ESM\n\nNuxt 3 natively supports TypeScript and ECMAScript Modules. Please check [Native ES Modules](\u002Fguide\u002Fgoing-further\u002Fesm) for more info and upgrading.\n\n### Ensure plugins default export\n\nIf you inject a Nuxt plugin that does not have `export default` (such as global Vue plugins), ensure you add `export default () =\u003E { }` to the end of it.\n\n::code-group\n\n```js [Before]\n\u002F\u002F ~\u002Fplugins\u002Fvuelidate.js\nimport Vue from 'vue'\nimport Vuelidate from 'vuelidate'\n\nVue.use(Vuelidate)\n```\n\n```js [After]\n\u002F\u002F ~\u002Fplugins\u002Fvuelidate.js\nimport Vue from 'vue'\nimport Vuelidate from 'vuelidate'\n\nVue.use(Vuelidate)\n\nexport default () =\u003E { }\n```\n\n::\n\n### Avoid runtime modules\n\nWith Nuxt 3, Nuxt is now a build-time-only dependency, which means that modules shouldn't attempt to hook into the Nuxt runtime.\n\nYour module should work even if it's only added to [`buildModules`](\u002Fguide\u002Fdirectory-structure\u002Fnuxt.config#buildmodules) (instead of `modules`). For example:\n\n- Avoid updating `process.env` within a Nuxt module and reading by a nuxt plugin; use [`runtimeConfig`](\u002Fguide\u002Fdirectory-structure\u002Fnuxt.config#publicruntimeconfig) instead.\n- (*) Avoid depending on runtime hooks like `vue-renderer:*` for production\n- (*) Avoid adding `serverMiddleware` by importing them inside the module. Instead, add them by referencing a file path so that they are independent of the module's context\n\n(*) Unless it is for `nuxt dev` purpose only and guarded with `if (nuxt.options.dev) { }`.\n\n::alert{type=info icon=ðŸ”Ž}\nContinue reading about Nuxt 3 modules in the [Modules guide](\u002Fguide\u002Fgoing-further\u002Fmodules).\n::\n\n### Use TypeScript (optional)\n\nWhile it is not essential, most of the Nuxt ecosystem is shifting to use TypeScript, so it is highly recommended to consider migration.\n\n::alert{icon=ðŸ’¡}\nYou can start migration by renaming `.js` files, to `.ts`. TypeScript is designed to be progressive!\n::\n\n::alert{icon=ðŸ’¡}\nYou can use TypeScript syntax for Nuxt 2 and 3 modules and plugins without any extra dependencies.\n::\n",ast:{type:"root",children:[{type:b,tag:"prose-h1",props:{class:"d-heading-title",id:J},children:[{type:a,value:C}]},{type:a,value:c},{type:b,tag:K,props:{id:L},children:[{type:b,tag:h,props:{href:"#module-compatibility"},children:[{type:a,value:M}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Nuxt 3 has a basic backward compatibility layer for Nuxt 2 modules using "},{type:b,tag:g,props:{},children:[{type:a,value:D}]},{type:a,value:" auto wrappers. But there are usually steps to follow to make modules compatible with Nuxt 3 and sometimes, using Nuxt Bridge is required for cross-version compatibility."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"We have prepared a "},{type:b,tag:h,props:{href:N},children:[{type:a,value:"Dedicated Guide"}]},{type:a,value:" for authoring Nuxt 3 ready modules using "},{type:b,tag:g,props:{},children:[{type:a,value:D}]},{type:a,value:". Currently best migration path is to follow it and rewrite your modules. Rest of this guide includes preparation steps if you prefer to avoid a full rewrite yet making modules compatible with Nuxt 3."}]},{type:a,value:c},{type:b,tag:t,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:"You can check for a list of Nuxt 3 ready modules from "},{type:b,tag:h,props:{href:"https:\u002F\u002Fmodules.nuxtjs.org\u002F?version=3.x",rel:[O,P,Q],target:R},children:[{type:a,value:"Nuxt Modules"}]},{type:a,value:p}]}]},{type:a,value:c},{type:b,tag:n,props:{id:S},children:[{type:b,tag:h,props:{href:"#plugin-compatibility"},children:[{type:a,value:T}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Nuxt 3 plugins are "},{type:b,tag:U,props:{},children:[{type:a,value:"not"}]},{type:a,value:" fully backward compatible with Nuxt 2."}]},{type:a,value:c},{type:b,tag:n,props:{id:V},children:[{type:b,tag:h,props:{href:"#vue-compatibility"},children:[{type:a,value:W}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Plugins or components using the Composition API need exclusive Vue 2 or Vue 3 support."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"By using "},{type:b,tag:h,props:{href:"https:\u002F\u002Fgithub.com\u002Fvueuse\u002Fvue-demi",rel:[O,P,Q],target:R},children:[{type:a,value:"vue-demi"}]},{type:a,value:" they should be compatible with both Nuxt 2 and 3."}]},{type:a,value:c},{type:b,tag:K,props:{id:X},children:[{type:b,tag:h,props:{href:"#module-migration"},children:[{type:a,value:Y}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"When Nuxt 3 users add your module, a compatible module container layer from "},{type:b,tag:g,props:{},children:[{type:a,value:D}]},{type:a,value:" is "},{type:b,tag:U,props:{},children:[{type:a,value:"automatically injected"}]},{type:a,value:", so as long as your code is following the guidelines below, it should continue working as-is."}]},{type:a,value:c},{type:b,tag:n,props:{id:Z},children:[{type:b,tag:h,props:{href:"#test-with-nuxtbridge"},children:[{type:a,value:"Test with "},{type:b,tag:g,props:{},children:[{type:a,value:E}]}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Migrating to "},{type:b,tag:g,props:{},children:[{type:a,value:E}]},{type:a,value:" is the first and most important step for supporting Nuxt 3."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If you have a fixture or example in your module, add "},{type:b,tag:g,props:{},children:[{type:a,value:E}]},{type:a,value:" package to its config (see "},{type:b,tag:h,props:{href:"\u002Fbridge#update-nuxtconfig"},children:[{type:a,value:"example"}]},{type:a,value:u}]},{type:a,value:c},{type:b,tag:n,props:{id:_},children:[{type:b,tag:h,props:{href:"#migrate-from-commonjs-to-esm"},children:[{type:a,value:$}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Nuxt 3 natively supports TypeScript and ECMAScript Modules. Please check "},{type:b,tag:h,props:{href:"\u002Fguide\u002Fgoing-further\u002Fesm"},children:[{type:a,value:"Native ES Modules"}]},{type:a,value:" for more info and upgrading."}]},{type:a,value:c},{type:b,tag:n,props:{id:aa},children:[{type:b,tag:h,props:{href:"#ensure-plugins-default-export"},children:[{type:a,value:ab}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"If you inject a Nuxt plugin that does not have "},{type:b,tag:g,props:{},children:[{type:a,value:"export default"}]},{type:a,value:" (such as global Vue plugins), ensure you add "},{type:b,tag:g,props:{},children:[{type:a,value:"export default () =\u003E { }"}]},{type:a,value:" to the end of it."}]},{type:a,value:c},{type:b,tag:"code-group",props:{},children:[{type:b,tag:ac,props:{},children:[{type:b,tag:d,props:{className:[ad]},children:[{type:a,value:"Before"}]},{type:b,tag:ae,props:{className:[af,ag]},children:[{type:b,tag:ah,props:{},children:[{type:b,tag:d,props:{className:[e,ai]},children:[{type:a,value:aj}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:v}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,w]},children:[{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:x}]}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:ak}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:v}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,w]},children:[{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:A}]}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:al}]},{type:a,value:F},{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:x}]},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:p}]},{type:b,tag:d,props:{className:[e,am,an,ao]},children:[{type:a,value:ap}]},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:G}]},{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:A}]},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:u}]},{type:a,value:c}]}]}]},{type:b,tag:ac,props:{},children:[{type:b,tag:d,props:{className:[ad]},children:[{type:a,value:"After"}]},{type:b,tag:ae,props:{className:[af,ag]},children:[{type:b,tag:ah,props:{},children:[{type:b,tag:d,props:{className:[e,ai]},children:[{type:a,value:aj}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:v}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,w]},children:[{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:x}]}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:ak}]},{type:a,value:c},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:v}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,w]},children:[{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:A}]}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:y}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,z]},children:[{type:a,value:al}]},{type:a,value:F},{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:x}]},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:p}]},{type:b,tag:d,props:{className:[e,am,an,ao]},children:[{type:a,value:ap}]},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:G}]},{type:b,tag:d,props:{className:[e,m]},children:[{type:a,value:A}]},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:u}]},{type:a,value:F},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:"export"}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,j,k]},children:[{type:a,value:"default"}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:G}]},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:u}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,"arrow","operator"]},children:[{type:a,value:"=\u003E"}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:"{"}]},{type:a,value:i},{type:b,tag:d,props:{className:[e,l]},children:[{type:a,value:"}"}]},{type:a,value:c}]}]}]}]},{type:a,value:c},{type:b,tag:n,props:{id:aq},children:[{type:b,tag:h,props:{href:"#avoid-runtime-modules"},children:[{type:a,value:ar}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"With Nuxt 3, Nuxt is now a build-time-only dependency, which means that modules shouldn't attempt to hook into the Nuxt runtime."}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"Your module should work even if it's only added to "},{type:b,tag:h,props:{href:"\u002Fguide\u002Fdirectory-structure\u002Fnuxt.config#buildmodules"},children:[{type:b,tag:g,props:{},children:[{type:a,value:"buildModules"}]}]},{type:a,value:" (instead of "},{type:b,tag:g,props:{},children:[{type:a,value:J}]},{type:a,value:"). For example:"}]},{type:a,value:c},{type:b,tag:"prose-ul",props:{},children:[{type:a,value:c},{type:b,tag:H,props:{},children:[{type:a,value:c},{type:a,value:"Avoid updating "},{type:b,tag:g,props:{},children:[{type:a,value:"process.env"}]},{type:a,value:" within a Nuxt module and reading by a nuxt plugin; use "},{type:b,tag:h,props:{href:"\u002Fguide\u002Fdirectory-structure\u002Fnuxt.config#publicruntimeconfig"},children:[{type:b,tag:g,props:{},children:[{type:a,value:"runtimeConfig"}]}]},{type:a,value:" instead."},{type:a,value:c}]},{type:a,value:c},{type:b,tag:H,props:{},children:[{type:a,value:c},{type:a,value:"(*) Avoid depending on runtime hooks like "},{type:b,tag:g,props:{},children:[{type:a,value:"vue-renderer:*"}]},{type:a,value:" for production"},{type:a,value:c}]},{type:a,value:c},{type:b,tag:H,props:{},children:[{type:a,value:c},{type:a,value:"(*) Avoid adding "},{type:b,tag:g,props:{},children:[{type:a,value:"serverMiddleware"}]},{type:a,value:" by importing them inside the module. Instead, add them by referencing a file path so that they are independent of the module's context"},{type:a,value:c}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"(*) Unless it is for "},{type:b,tag:g,props:{},children:[{type:a,value:"nuxt dev"}]},{type:a,value:" purpose only and guarded with "},{type:b,tag:g,props:{},children:[{type:a,value:"if (nuxt.options.dev) { }"}]},{type:a,value:p}]},{type:a,value:c},{type:b,tag:t,props:{icon:"ðŸ”Ž",type:"info"},children:[{type:b,tag:f,props:{},children:[{type:a,value:"Continue reading about Nuxt 3 modules in the "},{type:b,tag:h,props:{href:N},children:[{type:a,value:"Modules guide"}]},{type:a,value:p}]}]},{type:a,value:c},{type:b,tag:n,props:{id:as},children:[{type:b,tag:h,props:{href:"#use-typescript-optional"},children:[{type:a,value:at}]}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"While it is not essential, most of the Nuxt ecosystem is shifting to use TypeScript, so it is highly recommended to consider migration."}]},{type:a,value:c},{type:b,tag:t,props:{icon:au},children:[{type:b,tag:f,props:{},children:[{type:a,value:"You can start migration by renaming "},{type:b,tag:g,props:{},children:[{type:a,value:".js"}]},{type:a,value:" files, to "},{type:b,tag:g,props:{},children:[{type:a,value:".ts"}]},{type:a,value:". TypeScript is designed to be progressive!"}]}]},{type:a,value:c},{type:b,tag:t,props:{icon:au},children:[{type:b,tag:f,props:{},children:[{type:a,value:"You can use TypeScript syntax for Nuxt 2 and 3 modules and plugins without any extra dependencies."}]}]}]},toc:{title:s,searchDepth:B,depth:B,links:[{id:L,depth:B,text:M,children:[{id:S,depth:o,text:T},{id:V,depth:o,text:W}]},{id:X,depth:B,text:Y,children:[{id:Z,depth:o,text:"Test with @nuxt\u002Fbridge"},{id:_,depth:o,text:$},{id:aa,depth:o,text:ab},{id:aq,depth:o,text:ar},{id:as,depth:o,text:at}]}]}},template:av},templateOptions:{header:r,footer:r,aside:r,asideClass:s,fluid:q,banner:q},_img:{}}],fetch:{"0":{headerLinks:[{title:av,items:[{title:"Getting Started",subtitle:"Create fast websites easily",slug:"getting-started",to:"\u002Fgetting-started\u002Fquick-start"},{title:"Guide",subtitle:"Understand everything in Nuxt",slug:"guide",to:"\u002Fguide\u002Fconcepts\u002Fintroduction"}]},{title:"API",slug:"api",to:"\u002Fapi\u002Fcomposables\u002Fuse-async-data"},{title:aw,slug:"examples",to:"\u002Fexamples\u002Fessentials\u002Fhello-world"},{title:"Community",slug:"community",to:"\u002Fcommunity\u002Fgetting-help"}],footerLinks:[{title:"About",items:[{title:"Contact us",href:"mailto:hello@nuxtjs.com"},{title:"Enterprise support",to:"\u002Fsupport"},{title:"NuxtLabs company",href:"https:\u002F\u002Fnuxtlabs.com\u002F"},{title:"Open Source Software",href:"https:\u002F\u002Fgithub.com\u002Fnuxt"},{title:"Partnerships",to:"\u002Fpartners"},{title:"Telemetry",href:"https:\u002F\u002Fgithub.com\u002Fnuxt\u002Ftelemetry"}]},{title:"Ecosystem",items:[{title:"Announcements",to:"\u002Fannouncements"},{title:"Contribute",to:"\u002Fcontribution-guide"},{title:"Chat with us",href:"https:\u002F\u002Fdiscord.nuxtjs.org\u002F"},{title:"Events",to:"\u002Fevents"},{title:"Sponsors",to:"\u002Fsponsors"},{title:"Teams",to:"\u002Fteams"},{title:"Tutorials",to:"\u002Ftutorials"},{title:"Video courses",to:"\u002Fvideo-courses\u002F"}]},{title:"Resources",items:[{title:"Design",to:"\u002Fdesign"},{title:"Documentation",to:"\u002Fdocs"},{title:aw,to:"\u002Fexamples"},{title:"Deployments",to:"\u002Fdeployments"},{title:"Master courses",href:"https:\u002F\u002Fmasteringnuxt.com\u002F?utm_source=nuxt&utm_medium=link&utm_campaign=nsite"},{title:C,href:"https:\u002F\u002Fmodules.nuxtjs.org"},{title:"Releases",to:"\u002Freleases"},{title:"Showcases",to:"\u002Fshowcases"},{title:"Themes",to:"\u002Fthemes"}]}]},"1":{repoUrl:"https:\u002F\u002Fgithub.com\u002Fpangu-dev\u002Fpangu",prev:{slug:"server",to:"\u002Fmigration\u002Fserver",title:"Server"},next:null},_lazyComponents:new Set(["ProseParagraph","ButtonLink","HomeHero","SectionContentItem","HomeFeatures","IconNuxtNitro","Headline","ProseStrong","ProseA","ProseCodeInline","NuxtContainer","IconNuxtBridge","ProseH3","ProseLi","ProseUl","List","ProseH1","ProseH2","ProseCode","Alert","CodeGroup","ProseEm","ReadMore","Sandbox","ProseTh","ProseTr","ProseThead","ProseTd","ProseTbody","ProseTable","ProseBlockquote","ProseImg","NeedContribution","LinkExample","ProseOl","ProseH4","IconCloud","LogoAzure","LogoCloudFlare","LogoFirebase","LogoNetlify","LogoVercel"])},mutations:I}}("text","element","\n","span","token","prose-paragraph","prose-code-inline","prose-a"," ","keyword","module","punctuation","maybe-class-name","prose-h3",3,".",false,true,"","alert",")","import","imports","Vue","from","string","Vuelidate",2,"Modules","@nuxt\u002Fkit","@nuxt\u002Fbridge","\n\n","(","prose-li",void 0,"modules","prose-h2","module-compatibility","Module Compatibility","\u002Fguide\u002Fgoing-further\u002Fmodules","nofollow","noopener","noreferrer","_blank","plugin-compatibility","Plugin Compatibility","prose-strong","vue-compatibility","Vue Compatibility","module-migration","Module Migration","test-with-nuxtbridge","migrate-from-commonjs-to-esm","Migrate from CommonJS to ESM","ensure-plugins-default-export","Ensure plugins default export","prose-code","filename","pre","language-js","line-numbers","code","comment","\u002F\u002F ~\u002Fplugins\u002Fvuelidate.js","'vue'","'vuelidate'","method","function","property-access","use","avoid-runtime-modules","Avoid runtime modules","use-typescript-optional","Use TypeScript (optional)","ðŸ’¡","Docs","Examples")));