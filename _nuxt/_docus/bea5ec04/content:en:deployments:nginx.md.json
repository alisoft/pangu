{"key":"content:en:deployments:nginx.md","generatedAt":"2022-04-22T12:57:54.111Z","mtime":"2022-04-22T12:57:54.092Z","slug":"nginx","title":"NGINX","position":"999999990000","to":"/deployments/nginx","draft":false,"page":true,"language":"en","template":"guide","description":"How to use nginx as a reverse proxy?","target":"Static & Server","category":"deployment","logo":{"light":"/img/companies/square/light/Nginx.svg","dark":"/img/companies/square/dark/Nginx.svg"},"empty":false,"body":{"raw":"---\ntemplate: guide\ntitle: NGINX\ndescription: How to use nginx as a reverse proxy?\ntarget: Static & Server\ncategory: deployment\nlogo:\n  light: \"/img/companies/square/light/Nginx.svg\"\n  dark: \"/img/companies/square/dark/Nginx.svg\"\n---\n# Using NGINX as a reverse proxy\n\nHow to use nginx as a reverse proxy?\n\n---\n\n```nginx\nmap $sent_http_content_type $expires {\n    \"text/html\"                 epoch;\n    \"text/html; charset=utf-8\"  epoch;\n    default                     off;\n}\n\nserver {\n    listen          80;             # the port nginx is listening on\n    server_name     your-domain;    # setup your domain here\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    location / {\n        expires $expires;\n\n        proxy_redirect                      off;\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js instance here\n    }\n}\n```\n\n## Using nginx with generated pages and a caching proxy as fallback:\n\nIf you have a high volume website with regularly changing content, you might want to benefit from Nuxt generate capabilities and [nginx caching](https://www.nginx.com/blog/nginx-caching-guide).\n\nBelow is an example configuration. Keep in mind that:\n\n- root folder should be the same as set by [configuration generate.dir](/docs/configuration-glossary/configuration-generate#dir)\n- expire headers set by Nuxt are stripped (due to the cache)\n- both Nuxt and nginx can set additional headers, it's advised to choose one (if in doubt, choose nginx)\n- if your site is mostly static, increase the `proxy_cache_path inactive` and `proxy_cache_valid` numbers\n\nIf you don't generate your routes but still wish to benefit from nginx cache:\n\n- remove the `root` entry\n- change `location @proxy {` to `location / {`\n- remove the other 2 `location` entries\n\n```nginx\nproxy_cache_path  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off;\n\nmap $sent_http_content_type $expires {\n    \"text/html\"                 1h; # set this to your needs\n    \"text/html; charset=utf-8\"  1h; # set this to your needs\n    default                     7d; # set this to your needs\n}\n\nserver {\n    listen          80;             # the port nginx is listening on\n    server_name     your-domain;    # setup your domain here\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    charset utf-8;\n\n    root /var/www/NUXT_PROJECT_PATH/dist;\n\n    location ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$ {\n        expires $expires;\n        add_header Pragma public;\n        add_header Cache-Control \"public\";\n\n        try_files $uri $uri/ @proxy;\n    }\n\n    location / {\n        expires $expires;\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\n        add_header X-Frame-Options \"SAMEORIGIN\";\n\n        try_files $uri $uri/index.html @proxy; # for generate.subFolders: true\n        # try_files $uri $uri.html @proxy; # for generate.subFolders: false\n    }\n\n    location @proxy {\n        expires $expires;\n        add_header Content-Security-Policy \"default-src 'self' 'unsafe-inline';\";\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains; preload\" always;\n        add_header X-Frame-Options \"SAMEORIGIN\";\n        add_header X-Cache-Status $upstream_cache_status;\n\n        proxy_redirect                      off;\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_ignore_headers        Cache-Control;\n        proxy_http_version          1.1;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                  http://127.0.0.1:3000; # set the address of the Node.js instance here\n        proxy_cache                 nuxt-cache;\n        proxy_cache_bypass          $arg_nocache; # probably better to change this\n        proxy_cache_valid           200 302  60m; # set this to your needs\n        proxy_cache_valid           404      1m;  # set this to your needs\n        proxy_cache_lock            on;\n        proxy_cache_use_stale error timeout http_500 http_502 http_503 http_504;\n        proxy_cache_key             $uri$is_args$args;\n    }\n}\n```\n\n## nginx configuration for Laravel Forge:\n\nChange `YOUR_WEBSITE_FOLDER` to your website folder and `YOUR_WEBSITE_DOMAIN` to your website URL. Laravel Forge will have filled out these values for you but be sure to double check.\n\n```nginx\n# FORGE CONFIG (DOT NOT REMOVE!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\n\nmap $sent_http_content_type $expires {\n    \"text/html\"                 epoch;\n    \"text/html; charset=utf-8\"  epoch;\n    default                     off;\n}\n\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Content-Type-Options \"nosniff\";\n\n    charset utf-8;\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    # FORGE CONFIG (DOT NOT REMOVE!)\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\n\n    location / {\n        expires $expires;\n\n        proxy_redirect off;\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\n    }\n\n    access_log off;\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}\n\n# FORGE CONFIG (DOT NOT REMOVE!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n```\n\n## Secure Laravel Forge with TLS:\n\nIt's best to let Laravel Forge do the editing of the `nginx.conf` for you, by clicking on Sites -> YOUR_WEBSITE_DOMAIN (SERVER_NAME) and then click on SSL and install a certificate from one of the providers. Remember to activate the certificate. Your `nginx.conf` should now look something like this:\n\n```nginx\n# FORGE CONFIG (DOT NOT REMOVE!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/before/*;\n\nmap $sent_http_content_type $expires {\n    \"text/html\"                 epoch;\n    \"text/html; charset=utf-8\"  epoch;\n    default                     off;\n}\n\nserver {\n    listen 443 ssl http2;\n    listen [::]:443 ssl http2;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    # FORGE SSL (DO NOT REMOVE!)\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES';\n    ssl_prefer_server_ciphers on;\n    ssl_dhparam /etc/nginx/dhparams.pem;\n\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Content-Type-Options \"nosniff\";\n\n    charset utf-8;\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    # FORGE CONFIG (DOT NOT REMOVE!)\n    include forge-conf/YOUR_WEBSITE_FOLDER/server/*;\n\n    location / {\n        expires $expires;\n\n        proxy_set_header Host               $host;\n        proxy_set_header X-Real-IP          $remote_addr;\n        proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto  $scheme;\n        proxy_redirect              off;\n        proxy_read_timeout          1m;\n        proxy_connect_timeout       1m;\n        proxy_pass                          http://127.0.0.1:3000; # set the address of the Node.js\n    }\n\n    access_log off;\n    error_log  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error;\n\n    location ~ /\\.(?!well-known).* {\n        deny all;\n    }\n}\n\n# FORGE CONFIG (DOT NOT REMOVE!)\ninclude forge-conf/YOUR_WEBSITE_FOLDER/after/*;\n```\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"using-nginx-as-a-reverse-proxy"},"children":[{"type":"text","value":"Using NGINX as a reverse proxy"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"How to use nginx as a reverse proxy?"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    \"text/html"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" charset=utf-8\"  "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":"                     "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"server"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"listen"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"80"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"             "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# the port nginx is listening on"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"server_name"}]},{"type":"text","value":"     your-domain"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# setup your domain here"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_types"}]},{"type":"text","value":"      text/plain application/xml text/css application/javascript"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_min_length"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" /"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":"                      "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                          http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set the address of the Node.js instance here"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"using-nginx-with-generated-pages-and-a-caching-proxy-as-fallback"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#using-nginx-with-generated-pages-and-a-caching-proxy-as-fallback"},"children":[{"type":"text","value":"Using nginx with generated pages and a caching proxy as fallback:"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you have a high volume website with regularly changing content, you might want to benefit from Nuxt generate capabilities and "},{"type":"element","tag":"prose-a","props":{"href":"https://www.nginx.com/blog/nginx-caching-guide","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"nginx caching"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Below is an example configuration. Keep in mind that:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"root folder should be the same as set by "},{"type":"element","tag":"prose-a","props":{"href":"/docs/configuration-glossary/configuration-generate#dir"},"children":[{"type":"text","value":"configuration generate.dir"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"expire headers set by Nuxt are stripped (due to the cache)"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"both Nuxt and nginx can set additional headers, it's advised to choose one (if in doubt, choose nginx)"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"if your site is mostly static, increase the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_path inactive"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":" numbers"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you don't generate your routes but still wish to benefit from nginx cache:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"remove the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"root"}]},{"type":"text","value":" entry"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"change "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"location @proxy {"}]},{"type":"text","value":" to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"location / {"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"remove the other 2 "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" entries"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_path"}]},{"type":"text","value":"  /data/nginx/cache levels=1:2 keys_zone=nuxt-cache:25m max_size=1g inactive=60m use_temp_path=off"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"1h"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set this to your needs"}]},{"type":"text","value":"\n    \"text/html"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset=utf-8\""}]},{"type":"text","value":"  1h; "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set this to your needs"}]},{"type":"text","value":"\n    default                     7d; "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set this to your needs"}]},{"type":"text","value":"\n}\n\nserver {\n    listen          80;             "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# the port nginx is listening on"}]},{"type":"text","value":"\n    server_name     your-domain;    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# setup your domain here"}]},{"type":"text","value":"\n\n    gzip            on;\n    gzip_types      text/plain application/xml text/css application/javascript;\n    gzip_min_length 1000;\n\n    charset utf-8;\n\n    root /var/www/NUXT_PROJECT_PATH/dist;\n\n    location ~* \\.(?:ico|gif|jpe?g|png|woff2?|eot|otf|ttf|svg|js|css)$ {\n        expires "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]},{"type":"text","value":";\n        add_header Pragma public;\n        add_header Cache-Control "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"public\""}]},{"type":"text","value":";\n\n        try_files "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":"/ @proxy;\n    }\n\n    location / {\n        expires "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]},{"type":"text","value":";\n        add_header Content-Security-Policy \"default-src "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'self'"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'unsafe-inline'"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\""},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Strict-Transport-Security "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"max-age=31536000; includeSubDomains; preload\""}]},{"type":"text","value":" always"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Frame-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"SAMEORIGIN\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"try_files"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"text","value":"/index.html @proxy"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# for generate.subFolders: true"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# try_files $uri $uri.html @proxy; # for generate.subFolders: false"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" @proxy"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Content-Security-Policy "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"default-src 'self' 'unsafe-inline';\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" Strict-Transport-Security "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"max-age=31536000; includeSubDomains; preload\""}]},{"type":"text","value":" always"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Frame-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"SAMEORIGIN\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Cache-Status "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$upstream_cache_status"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":"                      "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_ignore_headers"}]},{"type":"text","value":"        Cache-Control"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_http_version"}]},{"type":"text","value":"          1.1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                  http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set the address of the Node.js instance here"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache"}]},{"type":"text","value":"                 nuxt-cache"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_bypass"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$arg_nocache"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# probably better to change this"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":"           "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"200"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"302"}]},{"type":"text","value":"  "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"60m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set this to your needs"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_valid"}]},{"type":"text","value":"           "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"404"}]},{"type":"text","value":"      "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set this to your needs"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_lock"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_use_stale"}]},{"type":"text","value":" error timeout http_500 http_502 http_503 http_504"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_cache_key"}]},{"type":"text","value":"             "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$uri"}]},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$is_args"}]},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$args"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"nginx-configuration-for-laravel-forge"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#nginx-configuration-for-laravel-forge"},"children":[{"type":"text","value":"nginx configuration for Laravel Forge:"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Change "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_FOLDER"}]},{"type":"text","value":" to your website folder and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"YOUR_WEBSITE_DOMAIN"}]},{"type":"text","value":" to your website URL. Laravel Forge will have filled out these values for you but be sure to double check."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/before/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    \"text/html"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset=utf-8\""}]},{"type":"text","value":"  epoch;\n    default                     off;\n}\n\nserver {\n    listen 80;\n    listen [::]:80;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    add_header X-Frame-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"SAMEORIGIN\""}]},{"type":"text","value":";\n    add_header X-XSS-Protection \"1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" mode=block\""},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Content-Type-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nosniff\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset"}]},{"type":"text","value":" utf-8"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_types"}]},{"type":"text","value":"      text/plain application/xml text/css application/javascript"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_min_length"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/server/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" /"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                          http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set the address of the Node.js"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"access_log"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"error_log"}]},{"type":"text","value":"  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" ~ /\\.(?!well-known).*"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"deny"}]},{"type":"text","value":" all"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/after/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"secure-laravel-forge-with-tls"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#secure-laravel-forge-with-tls"},"children":[{"type":"text","value":"Secure Laravel Forge with TLS:"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"It's best to let Laravel Forge do the editing of the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nginx.conf"}]},{"type":"text","value":" for you, by clicking on Sites -> YOUR_WEBSITE_DOMAIN (SERVER_NAME) and then click on SSL and install a certificate from one of the providers. Remember to activate the certificate. Your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nginx.conf"}]},{"type":"text","value":" should now look something like this:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-nginx","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/before/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$sent_http_content_type"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    \"text/html\"                 "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"epoch"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    \"text/html"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset=utf-8\""}]},{"type":"text","value":"  epoch;\n    default                     off;\n}\n\nserver {\n    listen "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"443"}]},{"type":"text","value":" ssl http2;\n    listen [::]:443 ssl http2;\n    server_name YOUR_WEBSITE_DOMAIN;\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE SSL (DO NOT REMOVE!)"}]},{"type":"text","value":"\n    ssl_certificate /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.crt;\n    ssl_certificate_key /etc/nginx/ssl/YOUR_WEBSITE_FOLDER/258880/server.key;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    ssl_ciphers "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!3DES'"}]},{"type":"text","value":";\n    ssl_prefer_server_ciphers on;\n    ssl_dhparam /etc/nginx/dhparams.pem;\n\n    add_header X-Frame-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"SAMEORIGIN\""}]},{"type":"text","value":";\n    add_header X-XSS-Protection \"1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" mode=block\""},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"add_header"}]},{"type":"text","value":" X-Content-Type-Options "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nosniff\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"charset"}]},{"type":"text","value":" utf-8"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip"}]},{"type":"text","value":"            "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"on"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_types"}]},{"type":"text","value":"      text/plain application/xml text/css application/javascript"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"gzip_min_length"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/server/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" /"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$expires"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" Host               "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$host"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Real-IP          "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$remote_addr"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-For    "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$proxy_add_x_forwarded_for"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_set_header"}]},{"type":"text","value":" X-Forwarded-Proto  "},{"type":"element","tag":"span","props":{"className":["token","variable"]},"children":[{"type":"text","value":"$scheme"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_redirect"}]},{"type":"text","value":"              "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_read_timeout"}]},{"type":"text","value":"          "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_connect_timeout"}]},{"type":"text","value":"       "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1m"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"proxy_pass"}]},{"type":"text","value":"                          http://127.0.0.1:3000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# set the address of the Node.js"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"access_log"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"off"}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"error_log"}]},{"type":"text","value":"  /var/log/nginx/YOUR_WEBSITE_FOLDER-error.log error"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"location"}]},{"type":"text","value":" ~ /\\.(?!well-known).*"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"deny"}]},{"type":"text","value":" all"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# FORGE CONFIG (DOT NOT REMOVE!)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","directive"]},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"include"}]},{"type":"text","value":" forge-conf/YOUR_WEBSITE_FOLDER/after/*"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"}]}]}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"using-nginx-with-generated-pages-and-a-caching-proxy-as-fallback","depth":2,"text":"Using nginx with generated pages and a caching proxy as fallback:"},{"id":"nginx-configuration-for-laravel-forge","depth":2,"text":"nginx configuration for Laravel Forge:"},{"id":"secure-laravel-forge-with-tls","depth":2,"text":"Secure Laravel Forge with TLS:"}]}}}