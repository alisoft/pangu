{"key":"content:en:docs:5.configuration-glossary:9.configuration-env.md","generatedAt":"2022-04-23T04:16:20.485Z","mtime":"2022-04-23T04:16:20.472Z","slug":"configuration-env","title":"The env property","position":"999900050009","to":"/docs/configuration-glossary/configuration-env","draft":false,"page":true,"language":"en","navigation":{"title":"env"},"description":"Share environment variables between client and server.","menu":"env","category":"configuration-glossary","empty":false,"body":{"raw":"---\ntitle: The env property\nnavigation.title: env\ndescription: Share environment variables between client and server.\nmenu: env\ncategory: configuration-glossary\n---\n\n# The env property\n\nShare environment variables between client and server.\n\n---\n\n- Type: `Object`\n\n> Nuxt lets you create environment variables client side, also to be shared from server side.\n\nThe env property defines environment variables that should be available on the client side. They can be assigned using server side environment variables, the [dotenv module](https://github.com/nuxt-community/dotenv-module) ones or similar.\n\n::alert\nFor nuxt versions > 2.12+, in cases where environment variables are required at runtime (not build time) it is recommended to subsitute the `env` property with [runtimeConfig properties](/docs/configuration-glossary/configuration-runtime-config): `publicRuntimeOptions` and `privateRuntimeOptions`. \n<br>\nLearn more with our tutorial about [moving from @nuxtjs/dotenv to runtime config](/tutorials/moving-from-nuxtjs-dotenv-to-runtime-config/).\n::\n\n**Make sure to read about `process.env` and `process.env == {}` below for better troubleshooting.**\n\n```js{}[nuxt.config.js]\nexport default {\n  env: {\n    baseUrl: process.env.BASE_URL || 'http://localhost:3000'\n  }\n}\n```\n\nThis lets you create a `baseUrl` property that will be equal to the `BASE_URL` server side environment variable if available or defined. If not, `baseUrl` in client side will be equal to `'http://localhost:3000'`. The server side variable BASE_URL is therefore copied to the client side via the `env` property in the `nuxt.config.js`. Alternatively, the other value is defined (http://localhost:3000).\n\nThen, I can access my `baseUrl` variable in 2 ways:\n\n1. Via `process.env.baseUrl`.\n2. Via `context.env.baseUrl`, see [context API](/docs/internals-glossary/context).\n\nYou can use the `env` property for giving a public token for example.\n\nFor the example above, we can use it to configure [axios](https://github.com/mzabriskie/axios).\n\n```js{}[plugins/axios.js]\nimport axios from 'axios'\n\nexport default axios.create({\n  baseURL: process.env.baseUrl\n})\n```\n\nThen, in your pages, you can import axios like this: `import axios from '~/plugins/axios'`\n\n## Automatic injection of environment variables\n\nIf you define environment variables starting with `NUXT_ENV_` in the build phase (e.g. `NUXT_ENV_COOL_WORD=freezing nuxt build` or `SET NUXT_ENV_COOL_WORD=freezing & nuxt build` for the Windows console, they'll be automatically injected into the process environment. Be aware that they'll potentially take precedence over defined variables in your `nuxt.config.js` with the same name.\n\n## process.env == {}\n\nNote that Nuxt uses webpack's `definePlugin` to define the environmental variable. This means that the actual `process` or `process.env` from Node.js is neither available nor defined. Each of the `env` properties defined in nuxt.config.js is individually mapped to `process.env.xxxx` and converted during compilation.\n\nMeaning, `console.log(process.env)` will output `{}` but `console.log(process.env.your_var)` will still output your value. When webpack compiles your code, it replaces all instances of `process.env.your_var` with the value you've set it to, e.g.: `env.test = 'testing123'`. If you use `process.env.test` in your code somewhere, it is actually translated to 'testing123'.\n\nbefore\n\n```js\nif (process.env.test == 'testing123')\n```\n\nafter\n\n```js\nif ('testing123' == 'testing123')\n```\n\n## serverMiddleware\n\nAs [serverMiddleware](/docs/configuration-glossary/configuration-servermiddleware) is decoupled from the main Nuxt build, `env` variables defined in `nuxt.config.js` are not available there.\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"the-env-property"},"children":[{"type":"text","value":"The env property"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Share environment variables between client and server."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Type: "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Object"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-blockquote","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nuxt lets you create environment variables client side, also to be shared from server side."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"The env property defines environment variables that should be available on the client side. They can be assigned using server side environment variables, the "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt-community/dotenv-module","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"dotenv module"}]},{"type":"text","value":" ones or similar."}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"For nuxt versions > 2.12+, in cases where environment variables are required at runtime (not build time) it is recommended to subsitute the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" property with "},{"type":"element","tag":"prose-a","props":{"href":"/docs/configuration-glossary/configuration-runtime-config"},"children":[{"type":"text","value":"runtimeConfig properties"}]},{"type":"text","value":": "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"publicRuntimeOptions"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"privateRuntimeOptions"}]},{"type":"text","value":".\n"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nLearn more with our tutorial about "},{"type":"element","tag":"prose-a","props":{"href":"/tutorials/moving-from-nuxtjs-dotenv-to-runtime-config/"},"children":[{"type":"text","value":"moving from @nuxtjs/dotenv to runtime config"}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Make sure to read about "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process.env"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process.env == {}"}]},{"type":"text","value":" below for better troubleshooting."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","literal-property","property"]},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","literal-property","property"]},"children":[{"type":"text","value":"baseUrl"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" process"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","constant"]},"children":[{"type":"text","value":"BASE_URL"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"||"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'http://localhost:3000'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"This lets you create a "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"baseUrl"}]},{"type":"text","value":" property that will be equal to the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"BASE_URL"}]},{"type":"text","value":" server side environment variable if available or defined. If not, "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"baseUrl"}]},{"type":"text","value":" in client side will be equal to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"'http://localhost:3000'"}]},{"type":"text","value":". The server side variable BASE_URL is therefore copied to the client side via the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" property in the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":". Alternatively, the other value is defined ("},{"type":"element","tag":"prose-a","props":{"href":"http://localhost:3000","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"http://localhost:3000"}]},{"type":"text","value":")."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Then, I can access my "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"baseUrl"}]},{"type":"text","value":" variable in 2 ways:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ol","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process.env.baseUrl"}]},{"type":"text","value":"."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"context.env.baseUrl"}]},{"type":"text","value":", see "},{"type":"element","tag":"prose-a","props":{"href":"/docs/internals-glossary/context"},"children":[{"type":"text","value":"context API"}]},{"type":"text","value":"."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can use the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" property for giving a public token for example."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"For the example above, we can use it to configure "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/mzabriskie/axios","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"axios"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"plugins/axios.js"}]},{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","imports"]},"children":[{"type":"text","value":"axios"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'axios'"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" axios"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","literal-property","property"]},"children":[{"type":"text","value":"baseURL"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" process"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"baseUrl"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Then, in your pages, you can import axios like this: "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"import axios from '~/plugins/axios'"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"automatic-injection-of-environment-variables"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#automatic-injection-of-environment-variables"},"children":[{"type":"text","value":"Automatic injection of environment variables"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you define environment variables starting with "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"NUXT_ENV_"}]},{"type":"text","value":" in the build phase (e.g. "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"NUXT_ENV_COOL_WORD=freezing nuxt build"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"SET NUXT_ENV_COOL_WORD=freezing & nuxt build"}]},{"type":"text","value":" for the Windows console, they'll be automatically injected into the process environment. Be aware that they'll potentially take precedence over defined variables in your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":" with the same name."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"processenv--"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#processenv--"},"children":[{"type":"text","value":"process.env == {}"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Note that Nuxt uses webpack's "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"definePlugin"}]},{"type":"text","value":" to define the environmental variable. This means that the actual "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process.env"}]},{"type":"text","value":" from Node.js is neither available nor defined. Each of the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" properties defined in nuxt.config.js is individually mapped to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process.env.xxxx"}]},{"type":"text","value":" and converted during compilation."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Meaning, "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"console.log(process.env)"}]},{"type":"text","value":" will output "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"{}"}]},{"type":"text","value":" but "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"console.log(process.env.your_var)"}]},{"type":"text","value":" will still output your value. When webpack compiles your code, it replaces all instances of "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process.env.your_var"}]},{"type":"text","value":" with the value you've set it to, e.g.: "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"env.test = 'testing123'"}]},{"type":"text","value":". If you use "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"process.env.test"}]},{"type":"text","value":" in your code somewhere, it is actually translated to 'testing123'."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"before"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"process"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"test"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"=="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'testing123'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"after"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'testing123'"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"=="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'testing123'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"servermiddleware"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#servermiddleware"},"children":[{"type":"text","value":"serverMiddleware"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"As "},{"type":"element","tag":"prose-a","props":{"href":"/docs/configuration-glossary/configuration-servermiddleware"},"children":[{"type":"text","value":"serverMiddleware"}]},{"type":"text","value":" is decoupled from the main Nuxt build, "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"env"}]},{"type":"text","value":" variables defined in "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"text","value":" are not available there."}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"automatic-injection-of-environment-variables","depth":2,"text":"Automatic injection of environment variables"},{"id":"processenv--","depth":2,"text":"process.env == {}"},{"id":"servermiddleware","depth":2,"text":"serverMiddleware"}]}}}