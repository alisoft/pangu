{"key":"content:en:deployments:dokku.md","generatedAt":"2022-04-23T04:16:18.062Z","mtime":"2022-04-23T04:16:18.048Z","slug":"dokku","title":"Dokku","position":"999999990000","to":"/deployments/dokku","draft":false,"page":true,"language":"en","template":"guide","description":"How to deploy a Nuxt application on Dokku?","target":"Server","category":"deployment","logo":{"light":"/img/companies/square/light/dokku.png","dark":"/img/companies/square/dark/dokku.png"},"empty":false,"body":{"raw":"---\ntemplate: guide\ntitle: Dokku\ndescription: How to deploy a Nuxt application on Dokku?\ntarget: Server\ncategory: deployment\nlogo:\n  light: \"/img/companies/square/light/dokku.png\"\n  dark: \"/img/companies/square/dark/dokku.png\"\n---\n# Deploy Nuxt on Dokku\n\nHow to deploy a Nuxt application on Dokku?\n\n---\n\nWe recommend to read [Dokku documentation for the setup](http://dokku.viewdocs.io/dokku/getting-started/installation/) and [Deploying a Node.js Application on Digital Ocean using Dokku](http://jakeklassen.com/post/deploying-a-node-app-on-digital-ocean-using-dokku/).\n\nFor the example, we will call our Nuxt application `my-nuxt-app`.\n\nWe need to tell Dokku to install the `devDependencies` of the project (to be able to launch `npm run build`):\n\n```bash\n// on Dokku Server\ndokku config:set my-nuxt-app NPM_CONFIG_PRODUCTION=false YARN_PRODUCTION=false\n```\n\nAlso, we want our application to listen on the host `0.0.0.0` and run in production mode:\n\n```bash\n// on Dokku Server\ndokku config:set my-nuxt-app HOST=0.0.0.0 NODE_ENV=production\n```\n\nYou should see these 3 lines when you type `dokku config my-nuxt-app`\n\n![nuxt config vars Dokku](https://i.imgur.com/9FNsaoQ.png)\n\nThen, we tell Dokku to launch `npm run build` via the `scripts.dokku.predeploy` script in our project `app.json`:\n\n`create a file name app.json in our project root folder`\n\n```js\n{\n  \"scripts\": {\n    \"dokku\": {\n      \"predeploy\": \"npm run build\"\n    }\n  }\n}\n```\n\nTo launch the application we run `npm run start` using the [Procfile](http://dokku.viewdocs.io/dokku/deployment/methods/dockerfiles/#procfiles-and-multiple-processes):\n\n```\nweb: npm run start\n```\n\nFinally, we can push our app on Dokku with:\n\n```bash\n// commit your change before push.\ngit remote add dokku dokku@yourServer:my-nuxt-app\ngit push dokku master\n```\n\nVoil√†! Our Nuxt application is now hosted on Dokku!\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"deploy-nuxt-on-dokku"},"children":[{"type":"text","value":"Deploy Nuxt on Dokku"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"How to deploy a Nuxt application on Dokku?"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-hr","props":{"class":"d-heading-hr"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"We recommend to read "},{"type":"element","tag":"prose-a","props":{"href":"http://dokku.viewdocs.io/dokku/getting-started/installation/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Dokku documentation for the setup"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-a","props":{"href":"http://jakeklassen.com/post/deploying-a-node-app-on-digital-ocean-using-dokku/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Deploying a Node.js Application on Digital Ocean using Dokku"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"For the example, we will call our Nuxt application "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"my-nuxt-app"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"We need to tell Dokku to install the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"devDependencies"}]},{"type":"text","value":" of the project (to be able to launch "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":"):"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// on Dokku Server\ndokku config:set my-nuxt-app "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NPM_CONFIG_PRODUCTION"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"false "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"YARN_PRODUCTION"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"false\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Also, we want our application to listen on the host "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"0.0.0.0"}]},{"type":"text","value":" and run in production mode:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// on Dokku Server\ndokku config:set my-nuxt-app "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"HOST"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"0.0"}]},{"type":"text","value":".0.0 "},{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NODE_ENV"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"production\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You should see these 3 lines when you type "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dokku config my-nuxt-app"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-img","props":{"alt":"nuxt config vars Dokku","src":"https://i.imgur.com/9FNsaoQ.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Then, we tell Dokku to launch "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run build"}]},{"type":"text","value":" via the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"scripts.dokku.predeploy"}]},{"type":"text","value":" script in our project "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"app.json"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"create a file name app.json in our project root folder"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","string-property","property"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","string-property","property"]},"children":[{"type":"text","value":"\"dokku\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","string-property","property"]},"children":[{"type":"text","value":"\"predeploy\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"npm run build\""}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"To launch the application we run "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"npm run start"}]},{"type":"text","value":" using the "},{"type":"element","tag":"prose-a","props":{"href":"http://dokku.viewdocs.io/dokku/deployment/methods/dockerfiles/#procfiles-and-multiple-processes","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Procfile"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-text"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"web: npm run start\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Finally, we can push our app on Dokku with:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"// commit your change before push.\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" remote "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" dokku dokku@yourServer:my-nuxt-app\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" push dokku master\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Voil√†! Our Nuxt application is now hosted on Dokku!"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}}}