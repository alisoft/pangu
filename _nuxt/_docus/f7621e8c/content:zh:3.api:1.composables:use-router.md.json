{"key":"content:zh:3.api:1.composables:use-router.md","generatedAt":"2022-07-12T12:13:02.038Z","mtime":"2022-07-12T12:13:02.027Z","slug":"use-router","title":"useRouter","position":"000300019999","to":"/api/composables/use-router","draft":false,"page":true,"language":"zh","empty":false,"description":"The useRouter composable returns the router instance and must be called in a setup function, plugin, or route middleware. (Within the template of a Vue component, you can access the router using $router instead.)","body":{"raw":"# `useRouter`\n\nThe `useRouter` composable returns the router instance and must be called in a `setup` function, plugin, or route middleware. (Within the template of a Vue component, you can access the router using `$router` instead.)\n\nIf you have a `pages/` folder, `useRouter` is identical in behavior to the one provided by `vue-router`. Feel free to read the router documentation for more information on what each method does.\n\n::ReadMore{link=\"https://router.vuejs.org/api/#currentroute\"}\n::\n\n## Basic manipulation\n\n- **addRoute:** Add a new route to the router instance. `parentName` can be provided to add new route as the child of an existing route.\n- **removeRoute:** Remove an existing route by its name.\n- **getRoutes:** Get a full list of all the route records.\n- **hasRoute:** Checks if a route with a given name exists\n\n## Based on history API\n\n- **back:** Go back in history if possible, same as `router.go(-1)`.\n- **forward:** Go forward in history if possible, same as `router.go(1)`.\n- **go:** Move forward or backward through the history without the hierarchical restrictions enforced in `router.back()` and `router.forward()`.\n- **push:** Programmatically navigate to a new URL by pushing an entry in the history stack. **It is recommended to use [`navigateTo`](http://v3.nuxtjs.org/api/utils/navigate-to#navigateto) instead.**\n- **replace:** Programmatically navigate to a new URL by replacing the current entry in the routes history stack. **It is recommended to use [`navigateTo`](http://v3.nuxtjs.org/api/utils/navigate-to#navigateto) instead.**\n\n> TIP: `router.addRoute()` adds route details into an array of routes and it is useful while building Nuxt plugins while `router.push()` on the other hand, triggers a new navigation immediately and it is useful in Nuxt Page components, Vue components and composable.\n\n```js [js]\nconst router = useRouter();\nrouter.back();\nrouter.forward();\nrouter.go();\nrouter.push({ path: \"/home\" });\nrouter.replace({ hash: \"#bio\" });\n````\n\n::ReadMore{link=\"https://developer.mozilla.org/en-US/docs/Web/API/History\"}\n::\n\n## Navigation guards\n\n`useRouter` composable provides `afterEach`, `beforeEach` and `beforeResolve` helper methods that acts as nagivation guards.\n\nHowever, Nuxt has a concept of **route middleware** that simplifies the implementation of navigation guards and provides a better developer experience.\n\n::ReadMore{link=\"/guide/directory-structure/middleware\"}\n::\n\n## Promise and error handling\n\n- **isReady:** Returns a Promise that resolves when the router has completed the initial navigation.\n- **onError:** Adds an error handler that is called every time a non caught error happens during navigation.\n- **resolve:** Returns the normalized version of a route location. Also includes an `href` property that includes any existing base.\n\n::ReadMore{link=\"https://router.vuejs.org/api/#router-methods\"}\n::\n\n## Universal router instance\n\nIf you do not have a `pages/` folder, then `useRouter` will return a universal router instance with similar helper methods, but be aware that not all features may be supported or behave in exactly the same way as with `vue-router`.\n\n::ReadMore{link=\"/guide/features/routing\"}\n::\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"userouter"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useRouter"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"The "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useRouter"}]},{"type":"text","value":" composable returns the router instance and must be called in a "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"setup"}]},{"type":"text","value":" function, plugin, or route middleware. (Within the template of a Vue component, you can access the router using "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"$router"}]},{"type":"text","value":" instead.)"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you have a "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" folder, "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useRouter"}]},{"type":"text","value":" is identical in behavior to the one provided by "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"vue-router"}]},{"type":"text","value":". Feel free to read the router documentation for more information on what each method does."}]},{"type":"text","value":"\n"},{"type":"element","tag":"read-more","props":{"link":"https://router.vuejs.org/api/#currentroute"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"basic-manipulation"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#basic-manipulation"},"children":[{"type":"text","value":"Basic manipulation"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"addRoute:"}]},{"type":"text","value":" Add a new route to the router instance. "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"parentName"}]},{"type":"text","value":" can be provided to add new route as the child of an existing route."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"removeRoute:"}]},{"type":"text","value":" Remove an existing route by its name."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"getRoutes:"}]},{"type":"text","value":" Get a full list of all the route records."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"hasRoute:"}]},{"type":"text","value":" Checks if a route with a given name exists"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"based-on-history-api"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#based-on-history-api"},"children":[{"type":"text","value":"Based on history API"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"back:"}]},{"type":"text","value":" Go back in history if possible, same as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"router.go(-1)"}]},{"type":"text","value":"."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"forward:"}]},{"type":"text","value":" Go forward in history if possible, same as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"router.go(1)"}]},{"type":"text","value":"."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"go:"}]},{"type":"text","value":" Move forward or backward through the history without the hierarchical restrictions enforced in "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"router.back()"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"router.forward()"}]},{"type":"text","value":"."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"push:"}]},{"type":"text","value":" Programmatically navigate to a new URL by pushing an entry in the history stack. "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"It is recommended to use "},{"type":"element","tag":"prose-a","props":{"href":"http://v3.nuxtjs.org/api/utils/navigate-to#navigateto","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"navigateTo"}]}]},{"type":"text","value":" instead."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"replace:"}]},{"type":"text","value":" Programmatically navigate to a new URL by replacing the current entry in the routes history stack. "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"It is recommended to use "},{"type":"element","tag":"prose-a","props":{"href":"http://v3.nuxtjs.org/api/utils/navigate-to#navigateto","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"navigateTo"}]}]},{"type":"text","value":" instead."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-blockquote","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"TIP: "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"router.addRoute()"}]},{"type":"text","value":" adds route details into an array of routes and it is useful while building Nuxt plugins while "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"router.push()"}]},{"type":"text","value":" on the other hand, triggers a new navigation immediately and it is useful in Nuxt Page components, Vue components and composable."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"js"}]},{"type":"element","tag":"pre","props":{"className":["language-js","line-numbers"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" router "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"useRouter"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrouter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"back"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrouter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"forward"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrouter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"go"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrouter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" path"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"/home\""}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nrouter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" hash"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"#bio\""}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"read-more","props":{"link":"https://developer.mozilla.org/en-US/docs/Web/API/History"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"navigation-guards"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#navigation-guards"},"children":[{"type":"text","value":"Navigation guards"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useRouter"}]},{"type":"text","value":" composable provides "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"afterEach"}]},{"type":"text","value":", "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"beforeEach"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"beforeResolve"}]},{"type":"text","value":" helper methods that acts as nagivation guards."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"However, Nuxt has a concept of "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"route middleware"}]},{"type":"text","value":" that simplifies the implementation of navigation guards and provides a better developer experience."}]},{"type":"text","value":"\n"},{"type":"element","tag":"read-more","props":{"link":"/guide/directory-structure/middleware"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"promise-and-error-handling"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#promise-and-error-handling"},"children":[{"type":"text","value":"Promise and error handling"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"isReady:"}]},{"type":"text","value":" Returns a Promise that resolves when the router has completed the initial navigation."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"onError:"}]},{"type":"text","value":" Adds an error handler that is called every time a non caught error happens during navigation."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"resolve:"}]},{"type":"text","value":" Returns the normalized version of a route location. Also includes an "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"href"}]},{"type":"text","value":" property that includes any existing base."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"read-more","props":{"link":"https://router.vuejs.org/api/#router-methods"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"universal-router-instance"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#universal-router-instance"},"children":[{"type":"text","value":"Universal router instance"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you do not have a "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"pages/"}]},{"type":"text","value":" folder, then "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useRouter"}]},{"type":"text","value":" will return a universal router instance with similar helper methods, but be aware that not all features may be supported or behave in exactly the same way as with "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"vue-router"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"read-more","props":{"link":"/guide/features/routing"},"children":[]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"basic-manipulation","depth":2,"text":"Basic manipulation"},{"id":"based-on-history-api","depth":2,"text":"Based on history API"},{"id":"navigation-guards","depth":2,"text":"Navigation guards"},{"id":"promise-and-error-handling","depth":2,"text":"Promise and error handling"},{"id":"universal-router-instance","depth":2,"text":"Universal router instance"}]}}}