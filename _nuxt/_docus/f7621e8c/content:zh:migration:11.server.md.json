{"key":"content:zh:migration:11.server.md","generatedAt":"2022-07-12T12:13:01.854Z","mtime":"2022-07-12T12:13:01.851Z","slug":"server","title":"Server","position":"999900110000","to":"/migration/server","draft":false,"page":true,"language":"zh","head":{"title":"Nuxt 2 to Nuxt 3: Server","titleTemplate":""},"empty":false,"description":"In a built Nuxt 3 application, there is no runtime Nuxt dependency. That means your site will be highly performant, and ultra-slim. But it also means you can no longer hook into runtime Nuxt server hooks.","body":{"raw":"---\nhead.title: 'Nuxt 2 to Nuxt 3: Server'\nhead.titleTemplate: ''\n---\n\n# Server\n\nIn a built Nuxt 3 application, there is no runtime Nuxt dependency. That means your site will be highly performant, and ultra-slim. But it also means you can no longer hook into runtime Nuxt server hooks.\n\n[Read more about the Nitro server engine](/guide/concepts/server-engine).\n\n## Steps\n\n1. Remove the `render` key in your `nuxt.config`.\n1. Any files in `~/server/api` and `~/server/middleware` will be automatically registered; you can remove them from your `serverMiddleware` array.\n1. Update any other items in your `serverMiddleware` array to point to files or npm packages directly, rather than using inline functions.\n1. If you are adding any server hooks, such as `server:` or `vue-renderer:` you will need to remove these and wait for [nitropack](https://github.com/unjs/nitropack) support for runtime hooks and plugins.\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"server"},"children":[{"type":"text","value":"Server"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"In a built Nuxt 3 application, there is no runtime Nuxt dependency. That means your site will be highly performant, and ultra-slim. But it also means you can no longer hook into runtime Nuxt server hooks."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-a","props":{"href":"/guide/concepts/server-engine"},"children":[{"type":"text","value":"Read more about the Nitro server engine"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"steps"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#steps"},"children":[{"type":"text","value":"Steps"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ol","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"render"}]},{"type":"text","value":" key in your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":"."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Any files in "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"~/server/api"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"~/server/middleware"}]},{"type":"text","value":" will be automatically registered; you can remove them from your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"serverMiddleware"}]},{"type":"text","value":" array."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Update any other items in your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"serverMiddleware"}]},{"type":"text","value":" array to point to files or npm packages directly, rather than using inline functions."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"If you are adding any server hooks, such as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"server:"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"vue-renderer:"}]},{"type":"text","value":" you will need to remove these and wait for "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/unjs/nitropack","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"nitropack"}]},{"type":"text","value":" support for runtime hooks and plugins."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"steps","depth":2,"text":"Steps"}]}}}