{"key":"content:en:bridge:1.overview.md","generatedAt":"2022-07-12T12:13:00.775Z","mtime":"2022-07-12T12:13:00.744Z","slug":"overview","title":"Overview","position":"999900010000","to":"/bridge/overview","draft":false,"page":true,"language":"en","head":{"title":"Migrate from Nuxt 2 to Nuxt Bridge","titleTemplate":""},"empty":false,"description":"Experience Nuxt 3 features on existing Nuxt 2 projects.","body":{"raw":"---\ntitle: Overview\nhead.title: 'Migrate from Nuxt 2 to Nuxt Bridge'\nhead.titleTemplate: ''\n---\n\n# Migrate from Nuxt 2 to Nuxt Bridge\n\nExperience Nuxt 3 features on existing Nuxt 2 projects.\n\n::alert\nIf you're starting a fresh Nuxt 3 project, please skip this section and go to [Nuxt 3 Installation](/getting-started/quick-start).\n::\n\n::alert{type=warning}\nNuxt Bridge provides identical features to Nuxt 3 ([docs](/guide/features)) but there are some limitations, notably that `useAsyncData` and `useFetch` composables are not available. Please read the rest of this page for details.\n::\n\nBridge is a forward-compatibility layer that allows you to experience many of the new Nuxt 3 features by simply installing and enabling a Nuxt module.\n\nUsing Nuxt Bridge, you can make sure your project is (almost) ready for Nuxt 3 and have the best developer experience without needing a major rewrite or risk breaking changes.\n\n## Upgrade Nuxt 2\n\nMake sure your dev server (`nuxt dev`) isn't running, remove any package lock files (`package-lock.json` and `yarn.lock`), and install the latest `nuxt-edge`:\n\n```diff [package.json]\n- \"nuxt\": \"^2.15.0\"\n+ \"nuxt-edge\": \"latest\"\n```\n\nThen, reinstall your dependencies:\n\n::code-group\n\n```bash [Yarn]\nyarn install\n```\n\n```bash [NPM]\nnpm install\n```\n\n::\n\n::alert\nOnce the installation is complete, make sure both development and production builds are working as expected before proceeding.\n::\n\n## Install Nuxt Bridge\n\nInstall `@nuxt/bridge-edge` as a development dependency:\n\n::code-group\n\n```bash [Yarn]\nyarn add --dev @nuxt/bridge@npm:@nuxt/bridge-edge\n```\n\n```bash [NPM]\nnpm install -D @nuxt/bridge@npm:@nuxt/bridge-edge\n```\n\n::\n\n## Update your scripts\n\nYou will also need to update your scripts within your `package.json` to reflect the fact that Nuxt will now produce a Nitro server as build output.\n\n### Nuxi\n\nNuxt 3 introduced the new Nuxt CLI command [`nuxi`](/api/commands/add). Update your scripts as follows to leverage the better support from Nuxt Bridge:\n\n```diff\n{\n  \"scripts\": {\n-   \"dev\": \"nuxt\",\n+   \"dev\": \"nuxi dev\",\n-   \"build\": \"nuxt build\",\n+   \"build\": \"nuxi build\",\n-   \"start\": \"nuxt start\",\n+   \"start\": \"nuxi preview\"\n  }\n}\n```\n\n### Static target\n\nIf you have set `target: 'static'` in your `nuxt.config` then you need to ensure that you update your build script to be `nuxi generate`.\n\n```json [package.json]\n{\n  \"scripts\": {\n    \"build\": \"nuxi generate\"\n  }\n}\n```\n\n### Server target\n\nFor all other situations, you can use the `nuxi build` command.\n\n```json [package.json]\n{\n  \"scripts\": {\n    \"build\": \"nuxi build\",\n    \"start\": \"nuxi preview\"\n  }\n}\n```\n\n## Update `nuxt.config`\n\nPlease make sure to avoid any CommonJS syntax such as `module.exports`, `require` or `require.resolve` in your config file. It will soon be deprecated and unsupported.\n\nYou can use static `import`, dynamic `import()` and `export default` instead. Using TypeScript by renaming to `nuxt.config.ts` is also possible and recommended.\n\n```ts [nuxt.config.js|ts]\nimport { defineNuxtConfig } from '@nuxt/bridge'\n\nexport default defineNuxtConfig({\n  // Your existing configuration\n})\n```\n\n## Update `tsconfig.json`\n\nIf you are using TypeScript, you can edit your `tsconfig.json` to benefit from auto-generated Nuxt types:\n\n```diff [tsconfig.json]\n{\n+ \"extends\": \"./.nuxt/tsconfig.json\",\n  \"compilerOptions\": {\n    ...\n  }\n}\n```\n\n::alert\nYou may also need to add `@vue/runtime-dom` as a devDependency if you are struggling to get template type inference working with [Volar](https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.volar).\n::\n::alert\nKeep in mind that all options extended from `./.nuxt/tsconfig.json` will be overwritten by the options defined in your `tsconfig.json`.\nOverwriting options such as `\"compilerOptions.paths\"` with your own configuration will lead TypeScript to not factor in the module resolutions from `./.nuxt/tsconfig.json`. This can lead to module resolutions such as `#imports` not being recognized.\n\nIn case you need to extend options provided by `./.nuxt/tsconfig.json` further, you can use the `alias` property withing your `nuxt.config`. `nuxi` will pick them up and extend `./.nuxt/tsconfig.json` accordingly.\n::\n\n## Migrate Composition API\n\nIf you were using `@vue/composition-api` or `@nuxtjs/composition-api`, please read the [composition api migration guide](/bridge/bridge-composition-api).\n\n### Migrate from CommonJS to ESM\n\nNuxt 3 natively supports TypeScript and ECMAScript Modules. Please check [Native ES Modules](/guide/going-further/esm) for more info and upgrading.\n\n## Remove incompatible and obsolete modules\n\n- Remove `@nuxt/content` (1.x). A rewrite for Nuxt 3 is planned (2.x)\n- Remove `nuxt-vite`: Bridge enables same functionality\n- Remove `@nuxt/typescript-build`: Bridge enables same functionality\n- Remove `@nuxt/typescript-runtime` and `nuxt-ts`: Nuxt 2 has built-in runtime support\n- Remove `@nuxt/nitro`: Bridge injects same functionality\n- Remove `@vue/composition-api` from your dependencies ([migration guide](/bridge/bridge-composition-api)).\n- Remove `@nuxtjs/composition-api` from your dependencies (and from your modules in `nuxt.config`) ([migration guide](/bridge/bridge-composition-api)).\n\n## Exclude built Nitro folder from git\n\nAdd the folder `.output` to the `.gitignore` file.\n\n## Ensure everything goes well\n\n✔️ Try with `nuxi dev` and `nuxi build` (or `nuxi generate`) to see if everything goes well.\n\n🐛 Is something wrong? Please let us know by creating an issue. Also, you can easily disable the bridge in the meantime:\n\n```ts [nuxt.config.js|ts]\nimport { defineNuxtConfig } from '@nuxt/bridge'\n\nexport default defineNuxtConfig({\n  bridge: false // Temporarily disable bridge integration\n})\n```\n\n## New plugins format (optional)\n\nYou can now migrate to the Nuxt 3 plugins API, which is slightly different in format from Nuxt 2.\n\nPlugins now take only one argument (`nuxtApp`). You can find out more in [the docs](/guide/directory-structure/plugins).\n\n```js\nexport default defineNuxtPlugin(nuxtApp => {\n  nuxtApp.provide('injected', () => 'my injected function')\n  // now available on `nuxtApp.$injected`\n})\n```\n\n::alert\nIf you want to use the new Nuxt composables (such as `useNuxtApp` or `useRuntimeConfig`) within your plugins, you will need to use the `defineNuxtPlugin` helper for those plugins.\n::\n\n::alert{type=warning}\nAlthough a compatibility interface is provided via `nuxtApp.vueApp` you should avoid registering plugins, directives, mixins or components this way without adding your own logic to ensure they are not installed more than once, or this may cause a memory leak.\n::\n\n## New `useHead` (optional)\n\nNuxt Bridge provides a new Nuxt 3 meta API that can be accessed with a new `useHead` composable.\n\n```vue\n<script setup>\nuseHead({\n  title: 'My Nuxt App',\n})\n</script>\n```\n\nYou will also need to enable this feature explicitly in your `nuxt.config`:\n\n```js\nimport { defineNuxtConfig } from '@nuxt/bridge'\n\nexport default defineNuxtConfig({\n  bridge: {\n    meta: true\n  }\n})\n```\n\nThis `useHead` composable uses `@vueuse/head` under the hood (rather than `vue-meta`) to manipulate your `<head>`.\nAccordingly, we recommend not to use both the native Nuxt 2 `head()` properties as well as `useHead`, as they may conflict.\n\nFor more information on how to use this composable, see [the docs](/guide/features/head-management).\n\n## Feature Flags\n\nYou can optionally disable some features from bridge or opt-in to less stable ones. In normal circumstances, it is always best to stick with defaults!\n\nYou can check [bridge/src/module.ts](https://github.com/nuxt/bridge/blob/main/src/module.ts) for latest defaults.\n\n```ts [nuxt.config.js|ts]\nimport { defineNuxtConfig } from '@nuxt/bridge'\n\nexport default defineNuxtConfig({\n  bridge: {\n\n    // -- Opt-in features --\n\n    // Use Vite as the bundler instead of webpack 4\n    // vite: true,\n\n    // Enable Nuxt 3 compatible useHead\n    // meta: true,\n\n    // -- Default features --\n\n    // Use legacy server instead of Nitro\n    // nitro: false,\n\n    // Disable nuxt 3 compatible `nuxtApp` interface\n    // app: false,\n\n    // Disable Composition API support\n    // capi: false,\n\n    // ... or just disable legacy Composition API support\n    // capi: {\n    //   legacy: false\n    // },\n\n    // Do not transpile modules\n    // transpile: false,\n\n    // Disable <script setup> support\n    // scriptSetup: false,\n\n    // Disable composables auto importing\n    // autoImports: false,\n\n    // Do not warn about module incompatibilities\n    // constraints: false\n  },\n\n  vite: {\n    // Config for Vite\n  }\n})\n```\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"migrate-from-nuxt-2-to-nuxt-bridge"},"children":[{"type":"text","value":"Migrate from Nuxt 2 to Nuxt Bridge"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Experience Nuxt 3 features on existing Nuxt 2 projects."}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you're starting a fresh Nuxt 3 project, please skip this section and go to "},{"type":"element","tag":"prose-a","props":{"href":"/getting-started/quick-start"},"children":[{"type":"text","value":"Nuxt 3 Installation"}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nuxt Bridge provides identical features to Nuxt 3 ("},{"type":"element","tag":"prose-a","props":{"href":"/guide/features"},"children":[{"type":"text","value":"docs"}]},{"type":"text","value":") but there are some limitations, notably that "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useAsyncData"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useFetch"}]},{"type":"text","value":" composables are not available. Please read the rest of this page for details."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Bridge is a forward-compatibility layer that allows you to experience many of the new Nuxt 3 features by simply installing and enabling a Nuxt module."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Using Nuxt Bridge, you can make sure your project is (almost) ready for Nuxt 3 and have the best developer experience without needing a major rewrite or risk breaking changes."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"upgrade-nuxt-2"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#upgrade-nuxt-2"},"children":[{"type":"text","value":"Upgrade Nuxt 2"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Make sure your dev server ("},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt dev"}]},{"type":"text","value":") isn't running, remove any package lock files ("},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"package-lock.json"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"yarn.lock"}]},{"type":"text","value":"), and install the latest "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt-edge"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"package.json"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-diff"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","deleted-sign","deleted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","deleted"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":" \"nuxt\": \"^2.15.0\"\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","inserted-sign","inserted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","inserted"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":" \"nuxt-edge\": \"latest\"\n"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Then, reinstall your dependencies:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"Yarn"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"yarn"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":"\n"}]}]}]},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"NPM"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":"\n"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Once the installation is complete, make sure both development and production builds are working as expected before proceeding."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"install-nuxt-bridge"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#install-nuxt-bridge"},"children":[{"type":"text","value":"Install Nuxt Bridge"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Install "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxt/bridge-edge"}]},{"type":"text","value":" as a development dependency:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"Yarn"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"yarn"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" --dev @nuxt/bridge@npm:@nuxt/bridge-edge\n"}]}]}]},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"NPM"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" -D @nuxt/bridge@npm:@nuxt/bridge-edge\n"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"update-your-scripts"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#update-your-scripts"},"children":[{"type":"text","value":"Update your scripts"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You will also need to update your scripts within your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"package.json"}]},{"type":"text","value":" to reflect the fact that Nuxt will now produce a Nitro server as build output."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"nuxi"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#nuxi"},"children":[{"type":"text","value":"Nuxi"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nuxt 3 introduced the new Nuxt CLI command "},{"type":"element","tag":"prose-a","props":{"href":"/api/commands/add"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxi"}]}]},{"type":"text","value":". Update your scripts as follows to leverage the better support from Nuxt Bridge:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-diff"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"{\n"},{"type":"element","tag":"span","props":{"className":["token","unchanged"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":" \"scripts\": {\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","deleted-sign","deleted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","deleted"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":"   \"dev\": \"nuxt\",\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","inserted-sign","inserted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","inserted"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":"   \"dev\": \"nuxi dev\",\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","deleted-sign","deleted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","deleted"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":"   \"build\": \"nuxt build\",\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","inserted-sign","inserted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","inserted"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":"   \"build\": \"nuxi build\",\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","deleted-sign","deleted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","deleted"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":"   \"start\": \"nuxt start\",\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","inserted-sign","inserted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","inserted"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":"   \"start\": \"nuxi preview\"\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","unchanged"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":" }\n"}]}]},{"type":"text","value":"}\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"static-target"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#static-target"},"children":[{"type":"text","value":"Static target"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you have set "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"target: 'static'"}]},{"type":"text","value":" in your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":" then you need to ensure that you update your build script to be "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxi generate"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"package.json"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-json"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","property"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","property"]},"children":[{"type":"text","value":"\"build\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nuxi generate\""}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"server-target"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#server-target"},"children":[{"type":"text","value":"Server target"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"For all other situations, you can use the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxi build"}]},{"type":"text","value":" command."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"package.json"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-json"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","property"]},"children":[{"type":"text","value":"\"scripts\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","property"]},"children":[{"type":"text","value":"\"build\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nuxi build\""}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","property"]},"children":[{"type":"text","value":"\"start\""}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"\"nuxi preview\""}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"update-nuxtconfig"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#update-nuxtconfig"},"children":[{"type":"text","value":"Update "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Please make sure to avoid any CommonJS syntax such as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"module.exports"}]},{"type":"text","value":", "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"require"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"require.resolve"}]},{"type":"text","value":" in your config file. It will soon be deprecated and unsupported."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can use static "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"import"}]},{"type":"text","value":", dynamic "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"import()"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"export default"}]},{"type":"text","value":" instead. Using TypeScript by renaming to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config.ts"}]},{"type":"text","value":" is also possible and recommended."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js|ts"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-ts"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" defineNuxtConfig "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'@nuxt/bridge'"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Your existing configuration"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"update-tsconfigjson"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#update-tsconfigjson"},"children":[{"type":"text","value":"Update "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"tsconfig.json"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you are using TypeScript, you can edit your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"text","value":" to benefit from auto-generated Nuxt types:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-diff"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"{\n"},{"type":"element","tag":"span","props":{"className":["token","inserted-sign","inserted"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","inserted"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":" \"extends\": \"./.nuxt/tsconfig.json\",\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","unchanged"]},"children":[{"type":"element","tag":"span","props":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":" \"compilerOptions\": {\n"}]},{"type":"element","tag":"span","props":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":"   ...\n"}]},{"type":"element","tag":"span","props":{"className":["token","prefix","unchanged"]},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"className":["token","line"]},"children":[{"type":"text","value":" }\n"}]}]},{"type":"text","value":"}\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You may also need to add "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@vue/runtime-dom"}]},{"type":"text","value":" as a devDependency if you are struggling to get template type inference working with "},{"type":"element","tag":"prose-a","props":{"href":"https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.volar","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Volar"}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Keep in mind that all options extended from "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"./.nuxt/tsconfig.json"}]},{"type":"text","value":" will be overwritten by the options defined in your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"tsconfig.json"}]},{"type":"text","value":".\nOverwriting options such as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"\"compilerOptions.paths\""}]},{"type":"text","value":" with your own configuration will lead TypeScript to not factor in the module resolutions from "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"./.nuxt/tsconfig.json"}]},{"type":"text","value":". This can lead to module resolutions such as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"#imports"}]},{"type":"text","value":" not being recognized."}]},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"In case you need to extend options provided by "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"./.nuxt/tsconfig.json"}]},{"type":"text","value":" further, you can use the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"alias"}]},{"type":"text","value":" property withing your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":". "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxi"}]},{"type":"text","value":" will pick them up and extend "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"./.nuxt/tsconfig.json"}]},{"type":"text","value":" accordingly."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"migrate-composition-api"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#migrate-composition-api"},"children":[{"type":"text","value":"Migrate Composition API"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you were using "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@vue/composition-api"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxtjs/composition-api"}]},{"type":"text","value":", please read the "},{"type":"element","tag":"prose-a","props":{"href":"/bridge/bridge-composition-api"},"children":[{"type":"text","value":"composition api migration guide"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"migrate-from-commonjs-to-esm"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#migrate-from-commonjs-to-esm"},"children":[{"type":"text","value":"Migrate from CommonJS to ESM"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nuxt 3 natively supports TypeScript and ECMAScript Modules. Please check "},{"type":"element","tag":"prose-a","props":{"href":"/guide/going-further/esm"},"children":[{"type":"text","value":"Native ES Modules"}]},{"type":"text","value":" for more info and upgrading."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"remove-incompatible-and-obsolete-modules"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#remove-incompatible-and-obsolete-modules"},"children":[{"type":"text","value":"Remove incompatible and obsolete modules"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxt/content"}]},{"type":"text","value":" (1.x). A rewrite for Nuxt 3 is planned (2.x)"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt-vite"}]},{"type":"text","value":": Bridge enables same functionality"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxt/typescript-build"}]},{"type":"text","value":": Bridge enables same functionality"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxt/typescript-runtime"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt-ts"}]},{"type":"text","value":": Nuxt 2 has built-in runtime support"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxt/nitro"}]},{"type":"text","value":": Bridge injects same functionality"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@vue/composition-api"}]},{"type":"text","value":" from your dependencies ("},{"type":"element","tag":"prose-a","props":{"href":"/bridge/bridge-composition-api"},"children":[{"type":"text","value":"migration guide"}]},{"type":"text","value":")."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Remove "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxtjs/composition-api"}]},{"type":"text","value":" from your dependencies (and from your modules in "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":") ("},{"type":"element","tag":"prose-a","props":{"href":"/bridge/bridge-composition-api"},"children":[{"type":"text","value":"migration guide"}]},{"type":"text","value":")."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"exclude-built-nitro-folder-from-git"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#exclude-built-nitro-folder-from-git"},"children":[{"type":"text","value":"Exclude built Nitro folder from git"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Add the folder "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".output"}]},{"type":"text","value":" to the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".gitignore"}]},{"type":"text","value":" file."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"ensure-everything-goes-well"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#ensure-everything-goes-well"},"children":[{"type":"text","value":"Ensure everything goes well"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"✔️ Try with "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxi dev"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxi build"}]},{"type":"text","value":" (or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxi generate"}]},{"type":"text","value":") to see if everything goes well."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"🐛 Is something wrong? Please let us know by creating an issue. Also, you can easily disable the bridge in the meantime:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js|ts"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-ts"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" defineNuxtConfig "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'@nuxt/bridge'"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  bridge"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"false"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Temporarily disable bridge integration"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"new-plugins-format-optional"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#new-plugins-format-optional"},"children":[{"type":"text","value":"New plugins format (optional)"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can now migrate to the Nuxt 3 plugins API, which is slightly different in format from Nuxt 2."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Plugins now take only one argument ("},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxtApp"}]},{"type":"text","value":"). You can find out more in "},{"type":"element","tag":"prose-a","props":{"href":"/guide/directory-structure/plugins"},"children":[{"type":"text","value":"the docs"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"defineNuxtPlugin"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"text","value":"nuxtApp"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","arrow","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  nuxtApp"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"provide"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'injected'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","arrow","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'my injected function'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// now available on `nuxtApp.$injected`"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If you want to use the new Nuxt composables (such as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useNuxtApp"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useRuntimeConfig"}]},{"type":"text","value":") within your plugins, you will need to use the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"defineNuxtPlugin"}]},{"type":"text","value":" helper for those plugins."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Although a compatibility interface is provided via "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxtApp.vueApp"}]},{"type":"text","value":" you should avoid registering plugins, directives, mixins or components this way without adding your own logic to ensure they are not installed more than once, or this may cause a memory leak."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"new-usehead-optional"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#new-usehead-optional"},"children":[{"type":"text","value":"New "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useHead"}]},{"type":"text","value":" (optional)"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Nuxt Bridge provides a new Nuxt 3 meta API that can be accessed with a new "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useHead"}]},{"type":"text","value":" composable."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-html"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"script"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","attr-name"]},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"className":["token","script"]},"children":[{"type":"element","tag":"span","props":{"className":["token","language-javascript"]},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"useHead"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  title"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'My Nuxt App'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You will also need to enable this feature explicitly in your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","imports"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" defineNuxtConfig "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'@nuxt/bridge'"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  bridge"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    meta"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"This "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useHead"}]},{"type":"text","value":" composable uses "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@vueuse/head"}]},{"type":"text","value":" under the hood (rather than "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"vue-meta"}]},{"type":"text","value":") to manipulate your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"<head>"}]},{"type":"text","value":".\nAccordingly, we recommend not to use both the native Nuxt 2 "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"head()"}]},{"type":"text","value":" properties as well as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useHead"}]},{"type":"text","value":", as they may conflict."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"For more information on how to use this composable, see "},{"type":"element","tag":"prose-a","props":{"href":"/guide/features/head-management"},"children":[{"type":"text","value":"the docs"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"feature-flags"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#feature-flags"},"children":[{"type":"text","value":"Feature Flags"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can optionally disable some features from bridge or opt-in to less stable ones. In normal circumstances, it is always best to stick with defaults!"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can check "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt/bridge/blob/main/src/module.ts","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"bridge/src/module.ts"}]},{"type":"text","value":" for latest defaults."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js|ts"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-ts"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" defineNuxtConfig "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'@nuxt/bridge'"}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"defineNuxtConfig"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  bridge"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// -- Opt-in features --"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Use Vite as the bundler instead of webpack 4"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// vite: true,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Enable Nuxt 3 compatible useHead"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// meta: true,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// -- Default features --"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Use legacy server instead of Nitro"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// nitro: false,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Disable nuxt 3 compatible `nuxtApp` interface"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// app: false,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Disable Composition API support"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// capi: false,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// ... or just disable legacy Composition API support"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// capi: {"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"//   legacy: false"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// },"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Do not transpile modules"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// transpile: false,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Disable <script setup> support"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// scriptSetup: false,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Disable composables auto importing"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// autoImports: false,"}]},{"type":"text","value":"\n\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Do not warn about module incompatibilities"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// constraints: false"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n\n  vite"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Config for Vite"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"upgrade-nuxt-2","depth":2,"text":"Upgrade Nuxt 2"},{"id":"install-nuxt-bridge","depth":2,"text":"Install Nuxt Bridge"},{"id":"update-your-scripts","depth":2,"text":"Update your scripts","children":[{"id":"nuxi","depth":3,"text":"Nuxi"},{"id":"static-target","depth":3,"text":"Static target"},{"id":"server-target","depth":3,"text":"Server target"}]},{"id":"update-nuxtconfig","depth":2,"text":"Update nuxt.config"},{"id":"update-tsconfigjson","depth":2,"text":"Update tsconfig.json"},{"id":"migrate-composition-api","depth":2,"text":"Migrate Composition API","children":[{"id":"migrate-from-commonjs-to-esm","depth":3,"text":"Migrate from CommonJS to ESM"}]},{"id":"remove-incompatible-and-obsolete-modules","depth":2,"text":"Remove incompatible and obsolete modules"},{"id":"exclude-built-nitro-folder-from-git","depth":2,"text":"Exclude built Nitro folder from git"},{"id":"ensure-everything-goes-well","depth":2,"text":"Ensure everything goes well"},{"id":"new-plugins-format-optional","depth":2,"text":"New plugins format (optional)"},{"id":"new-usehead-optional","depth":2,"text":"New useHead (optional)"},{"id":"feature-flags","depth":2,"text":"Feature Flags"}]}}}