{"key":"content:en:announcements:0.nuxt-static-improvements.md","generatedAt":"2022-04-21T11:59:24.425Z","mtime":"2022-04-21T11:59:24.399Z","slug":"nuxt-static-improvements","title":"Nuxt Static Improvements","position":"999900000000","to":"/announcements/nuxt-static-improvements","draft":false,"page":true,"language":"en","template":"post","description":"With Nuxt version 2.13, the full-static mode has been introduced. In addition, a new command nuxt export was added to pre-render your pages without triggering a webpack build with the goal to separate the rendering and build process. The only issue was that most Nuxt users weren't able to unleash the full potential of the separation... until now.","imgUrl":"blog/nuxt-static-improvements/main.jpeg","imgCredits":"Naresh Bojja","imgCreditsUrl":"https://unsplash.com/@nareshbojja","date":"2020-07-27T00:00:00.000Z","authors":[{"name":"Alexander Lichter","avatarUrl":"https://pbs.twimg.com/profile_images/1316077440414998528/mY2rcM7__400x400.jpg","link":"https://twitter.com/TheAlexLichter"},{"name":"SÃ©bastien Chopin","avatarUrl":"https://pbs.twimg.com/profile_images/1042510623962275840/1Iw_Mvud_400x400.jpg","link":"https://twitter.com/atinux"},{"name":"Pooya Parsa","avatarUrl":"https://pbs.twimg.com/profile_images/1268227177612541952/9-fujxqt_400x400.jpg","link":"https://twitter.com/_pi0_"}],"tags":["release","full-static","framework"],"category":"Release","empty":false,"body":{"raw":"---\ntemplate: post\ntitle: Nuxt Static Improvements\ndescription: With Nuxt version 2.13, the full-static mode has been introduced. In addition, a new command nuxt export was added to pre-render your pages without triggering a webpack build with the goal to separate the rendering and build process. The only issue was that most Nuxt users weren't able to unleash the full potential of the separation... until now.\nimgUrl: blog/nuxt-static-improvements/main.jpeg\nimgCredits: Naresh Bojja\nimgCreditsUrl: https://unsplash.com/@nareshbojja\ndate: 2020-07-27\nauthors:\n  - name: Alexander Lichter\n    avatarUrl: https://pbs.twimg.com/profile_images/1316077440414998528/mY2rcM7__400x400.jpg\n    link: https://twitter.com/TheAlexLichter\n  - name: SÃ©bastien Chopin\n    avatarUrl: https://pbs.twimg.com/profile_images/1042510623962275840/1Iw_Mvud_400x400.jpg\n    link: https://twitter.com/atinux\n  - name: Pooya Parsa\n    avatarUrl: https://pbs.twimg.com/profile_images/1268227177612541952/9-fujxqt_400x400.jpg\n    link: https://twitter.com/_pi0_\ntags:\n  - release\n  - full-static\n  - framework\ncategory: Release\n---\n\n## Introduction\n\nWith Nuxt version 2.13, the [full-static mode](/announcements/going-full-static) has been introduced. In addition, a new command `nuxt export` was added to pre-render your pages without triggering a webpack build with the goal to separate the rendering and build process. The only issue was that most Nuxt users weren't able to unleash the full potential of the separation... **until now.**\n\n- [Introduction](#introduction)\n- [Faster Static Deployments](#faster-static-deployments)\n- [Generate time: cache vs full webpack build](#generate-time-cache-vs-full-webpack-build)\n- [Using in your projects](#using-in-your-projects)\n  - [Excluding Files from Cache](#excluding-files-from-cache)\n  - [Module Authors](#module-authors)\n- [How it works](#how-it-works)\n  - [Back to old school commands](#back-to-old-school-commands)\n- [What to do next](#what-to-do-next)\n\n## Faster Static Deployments\n\nWith v2.14, `nuxt generate` will **automagically skip webpack build step when no code has been changed** and use the previous build using cache. This will help to drastically improve static deployments time by avoiding unnecessary builds which is usually the most time-consuming part of generation process. Cache support is **platform-agnostic** and works on Netlify, Vercel, or any other CI/CD setup that is caching `node_modules`.\n\n::video-player\n---\nsources:\n- src: https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.webm\n  type: video/webm\n- src: https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.mp4\n  type: video/mp4\n- src: https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.ogv\n  type: video/ogg\nposter: https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.jpg\n---\n::\n\n## Generate time: cache vs full webpack build\n\nSee the comparison in seconds between two `nuxt generate`:\n\n- `Build` is when a webpack build is required\n- `Cache` is only when the content has changed (webpack build skipped)\n\n<bar-chart-cache-build></bar-chart-cache-build>\n\n::alert{type=\"next\"}\nThe static site generation of our projects on content changes are now **~3.6x times** faster ðŸš€\n::\n\nProject links: [Basic](https://github.com/pi0/nuxt-static-demo), [Strapi Module Docs](https://github.com/nuxt-community/strapi-module/tree/master/docs), [Content Module Docs](https://github.com/nuxt/content/tree/master/docs) and [Nuxt Docs](https://github.com/nuxt/nuxtjs.org).\n\n## Using in your projects\n\n1. Update `nuxt` to the latest minor version, which is v2.14.\n\n::code-group\n```bash [Yarn]\nyarn upgrade nuxt\n```\n```bash [NPM]\nnpm update\n```\n::\n\n2. Ensure `target` is `static` inside your `nuxt.config`\n\n```js{}[nuxt.config.js]\nexport default {\n  target: 'static'\n  // ...\n}\n```\n\n`nuxt generate` will behave as before to avoid breaking changes and provide legacy compatibility if you keep `target: â€˜serverâ€™` or don't specify target.\n\n3. Thatâ€™s it ðŸ™Œ\n\nNow, the `nuxt generate` command will build the project only if necessary, which is the case when files inside the project have been changed. It will always re-render your routes to static HTML files, like `nuxt export` is doing already.\n\nNow you only have to change your build command back from `nuxt build && nuxt export` to `nuxt generate` on the platform you are using. If you are using a CI, ensure that you are properly caching `node_modules`.\n\n### Excluding Files from Cache\n\nBy default, nuxt ignores these directories so if any change happens inside them, build will not be triggered:\n\n- Build directory (`.nuxt/`)\n- Static directory (`static/`)\n- Generate dist (`dist/`)\n- `node_modules`\n- `README.md`\n- Hidden dotfiles (like `.npmrc`)\n\nYou can add more patterns using [generate.cache.ignore](/docs/configuration-glossary/configuration-generate#cache) option in `nuxt.config`:\n\n```js{}[nuxt.config.js]\nexport default {\n  generate: {\n    cache: {\n      ignore: [\n        // When something changed in the docs folder, do not re-build via webpack\n        'docs'\n      ]\n    }\n  }\n}\n```\n\nIt is also possible to use a function for `ignore` option to override default ignore entries.\n\n### Module Authors\n\nWhat if you are developing a nuxt module that is working with files that should not trigger a rebuild? The best example is for [@nuxt/content](https://content.nuxtjs.org) module that reads markdown files from the repository. In this case, these files are used within a runtime module, which is the case when using `@nuxt/content`, the module itself can tell nuxt to ignore these files for you already so you don't have to do anything! Module authors can use the new `generate:cache:ignore` hook to do so:\n\n```js\nnuxt.hook('generate:cache:ignore', ignore => ignore.push('content'))\n```\n\n## How it works\n\nWhen using the new `nuxt generate` with `static` target, a snapshot including checksum of non-ignored project files as well as nuxt version and some other configuration will be written `.nuxt/build.json`. In addition, we also move the build directory to `node_modules/.cache/nuxt`. Because `node_modules` is cached by all major platforms (Netlify, Vercel, ...) and common CI/CD scripts, this solution works out of the box without additional configuration.\n\nWhen `nuxt generate` is called subsequently, it will again create a checksum based on your project files and then compare it to the existing one inside `node_modules/.cache/nuxt/build.json`.\n\nIf they match, it means that nothing is changed that needs rebuild so we can directly start rendering pages.\n\nIf a mismatch is detected, it means that a full rebuild would be necessary. You can also see what file caused rebuild by checking console logs. After the build, nuxt generate will save the new checksum inside `.nuxt/build.json`. You can check full implementation [here](https://github.com/nuxt/nuxt.js/pull/7712).\n\n### Back to old school commands\n\nWith Nuxt v2.13, we introduced `nuxt export` and `nuxt serve` specially designed for the static target. With Nuxt v2.14, they are deprecated as `nuxt generate` and `nuxt start` is smart to detect the target and build when necessary.\n\nServer target:\n\n- `nuxt dev` = development server\n- `nuxt build` = build your application for production\n- `nuxt start` = start the production server (use it for Node.js hosting like Heroku, Digital Ocean, etc)\n\nStatic target:\n\n- `nuxt dev` = development server\n- `nuxt generate` = build if needed and statically export to `dist/`\n- `nuxt start` = serve the `dist/` directory like your static hosting would do (Netlify, Vercel, Surge, etc), great for testing before deploying\n\n## What to do next\n\n- Upgrade your project to [nuxt@2.14.0](https://github.com/nuxt/nuxt.js/releases/tag/v2.14.0)\n- Use `nuxt generate` instead of `nuxt export`\n- Use `nuxt start` instead of `nuxt serve`\n- Enjoy fast deployments ðŸ¤™\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h2","props":{"id":"introduction"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#introduction"},"children":[{"type":"text","value":"Introduction"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"With Nuxt version 2.13, the "},{"type":"element","tag":"prose-a","props":{"href":"/announcements/going-full-static"},"children":[{"type":"text","value":"full-static mode"}]},{"type":"text","value":" has been introduced. In addition, a new command "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt export"}]},{"type":"text","value":" was added to pre-render your pages without triggering a webpack build with the goal to separate the rendering and build process. The only issue was that most Nuxt users weren't able to unleash the full potential of the separation... "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"until now."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#introduction"},"children":[{"type":"text","value":"Introduction"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#faster-static-deployments"},"children":[{"type":"text","value":"Faster Static Deployments"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#generate-time-cache-vs-full-webpack-build"},"children":[{"type":"text","value":"Generate time: cache vs full webpack build"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#using-in-your-projects"},"children":[{"type":"text","value":"Using in your projects"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#excluding-files-from-cache"},"children":[{"type":"text","value":"Excluding Files from Cache"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#module-authors"},"children":[{"type":"text","value":"Module Authors"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#how-it-works"},"children":[{"type":"text","value":"How it works"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#back-to-old-school-commands"},"children":[{"type":"text","value":"Back to old school commands"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-a","props":{"href":"#what-to-do-next"},"children":[{"type":"text","value":"What to do next"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"faster-static-deployments"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#faster-static-deployments"},"children":[{"type":"text","value":"Faster Static Deployments"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"With v2.14, "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" will "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"automagically skip webpack build step when no code has been changed"}]},{"type":"text","value":" and use the previous build using cache. This will help to drastically improve static deployments time by avoiding unnecessary builds which is usually the most time-consuming part of generation process. Cache support is "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"platform-agnostic"}]},{"type":"text","value":" and works on Netlify, Vercel, or any other CI/CD setup that is caching "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"node_modules"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"video-player","props":{":sources":"[{\"src\":\"https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.webm\",\"type\":\"video/webm\"},{\"src\":\"https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.mp4\",\"type\":\"video/mp4\"},{\"src\":\"https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.ogv\",\"type\":\"video/ogg\"}]","poster":"https://res.cloudinary.com/nuxt/video/upload/v1595852304/nuxt-smart-generate_pjaat1.jpg"},"children":[]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"generate-time-cache-vs-full-webpack-build"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#generate-time-cache-vs-full-webpack-build"},"children":[{"type":"text","value":"Generate time: cache vs full webpack build"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"See the comparison in seconds between two "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Build"}]},{"type":"text","value":" is when a webpack build is required"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Cache"}]},{"type":"text","value":" is only when the content has changed (webpack build skipped)"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"bar-chart-cache-build","props":{},"children":[{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"next"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"The static site generation of our projects on content changes are now "},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"~3.6x times"}]},{"type":"text","value":" faster ðŸš€"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Project links: "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/pi0/nuxt-static-demo","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Basic"}]},{"type":"text","value":", "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt-community/strapi-module/tree/master/docs","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Strapi Module Docs"}]},{"type":"text","value":", "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt/content/tree/master/docs","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Content Module Docs"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt/nuxtjs.org","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Nuxt Docs"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"using-in-your-projects"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#using-in-your-projects"},"children":[{"type":"text","value":"Using in your projects"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ol","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Update "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt"}]},{"type":"text","value":" to the latest minor version, which is v2.14."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"code-group","props":{},"children":[{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"Yarn"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"yarn"}]},{"type":"text","value":" upgrade nuxt\n"}]}]}]},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"NPM"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"npm"}]},{"type":"text","value":" update\n"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ol","props":{"start":2},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Ensure "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"target"}]},{"type":"text","value":" is "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" inside your "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","literal-property","property"]},"children":[{"type":"text","value":"target"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'static'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// ..."}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" will behave as before to avoid breaking changes and provide legacy compatibility if you keep "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"target: â€˜serverâ€™"}]},{"type":"text","value":" or don't specify target."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ol","props":{"start":3},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Thatâ€™s it ðŸ™Œ"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Now, the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" command will build the project only if necessary, which is the case when files inside the project have been changed. It will always re-render your routes to static HTML files, like "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt export"}]},{"type":"text","value":" is doing already."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Now you only have to change your build command back from "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt build && nuxt export"}]},{"type":"text","value":" to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" on the platform you are using. If you are using a CI, ensure that you are properly caching "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"node_modules"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"excluding-files-from-cache"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#excluding-files-from-cache"},"children":[{"type":"text","value":"Excluding Files from Cache"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"By default, nuxt ignores these directories so if any change happens inside them, build will not be triggered:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Build directory ("},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".nuxt/"}]},{"type":"text","value":")"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Static directory ("},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"static/"}]},{"type":"text","value":")"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Generate dist ("},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dist/"}]},{"type":"text","value":")"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"node_modules"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"README.md"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Hidden dotfiles (like "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".npmrc"}]},{"type":"text","value":")"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can add more patterns using "},{"type":"element","tag":"prose-a","props":{"href":"/docs/configuration-glossary/configuration-generate#cache"},"children":[{"type":"text","value":"generate.cache.ignore"}]},{"type":"text","value":" option in "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","literal-property","property"]},"children":[{"type":"text","value":"generate"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","literal-property","property"]},"children":[{"type":"text","value":"cache"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","literal-property","property"]},"children":[{"type":"text","value":"ignore"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// When something changed in the docs folder, do not re-build via webpack"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'docs'"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"It is also possible to use a function for "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"ignore"}]},{"type":"text","value":" option to override default ignore entries."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"module-authors"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#module-authors"},"children":[{"type":"text","value":"Module Authors"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"What if you are developing a nuxt module that is working with files that should not trigger a rebuild? The best example is for "},{"type":"element","tag":"prose-a","props":{"href":"https://content.nuxtjs.org","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"@nuxt/content"}]},{"type":"text","value":" module that reads markdown files from the repository. In this case, these files are used within a runtime module, which is the case when using "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"@nuxt/content"}]},{"type":"text","value":", the module itself can tell nuxt to ignore these files for you already so you don't have to do anything! Module authors can use the new "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"generate:cache:ignore"}]},{"type":"text","value":" hook to do so:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"nuxt"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"hook"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'generate:cache:ignore'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"text","value":"ignore"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","arrow","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" ignore"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'content'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"how-it-works"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#how-it-works"},"children":[{"type":"text","value":"How it works"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"When using the new "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" with "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" target, a snapshot including checksum of non-ignored project files as well as nuxt version and some other configuration will be written "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".nuxt/build.json"}]},{"type":"text","value":". In addition, we also move the build directory to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"node_modules/.cache/nuxt"}]},{"type":"text","value":". Because "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"node_modules"}]},{"type":"text","value":" is cached by all major platforms (Netlify, Vercel, ...) and common CI/CD scripts, this solution works out of the box without additional configuration."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"When "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" is called subsequently, it will again create a checksum based on your project files and then compare it to the existing one inside "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"node_modules/.cache/nuxt/build.json"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If they match, it means that nothing is changed that needs rebuild so we can directly start rendering pages."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If a mismatch is detected, it means that a full rebuild would be necessary. You can also see what file caused rebuild by checking console logs. After the build, nuxt generate will save the new checksum inside "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".nuxt/build.json"}]},{"type":"text","value":". You can check full implementation "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt/nuxt.js/pull/7712","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"back-to-old-school-commands"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#back-to-old-school-commands"},"children":[{"type":"text","value":"Back to old school commands"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"With Nuxt v2.13, we introduced "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt export"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt serve"}]},{"type":"text","value":" specially designed for the static target. With Nuxt v2.14, they are deprecated as "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":" is smart to detect the target and build when necessary."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Server target:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt dev"}]},{"type":"text","value":" = development server"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":" = build your application for production"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":" = start the production server (use it for Node.js hosting like Heroku, Digital Ocean, etc)"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Static target:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt dev"}]},{"type":"text","value":" = development server"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" = build if needed and statically export to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dist/"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":" = serve the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"dist/"}]},{"type":"text","value":" directory like your static hosting would do (Netlify, Vercel, Surge, etc), great for testing before deploying"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"what-to-do-next"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#what-to-do-next"},"children":[{"type":"text","value":"What to do next"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Upgrade your project to "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt/nuxt.js/releases/tag/v2.14.0","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"nuxt@2.14.0"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Use "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt generate"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt export"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Use "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt start"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt serve"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Enjoy fast deployments ðŸ¤™"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"introduction","depth":2,"text":"Introduction"},{"id":"faster-static-deployments","depth":2,"text":"Faster Static Deployments"},{"id":"generate-time-cache-vs-full-webpack-build","depth":2,"text":"Generate time: cache vs full webpack build"},{"id":"using-in-your-projects","depth":2,"text":"Using in your projects","children":[{"id":"excluding-files-from-cache","depth":3,"text":"Excluding Files from Cache"},{"id":"module-authors","depth":3,"text":"Module Authors"}]},{"id":"how-it-works","depth":2,"text":"How it works","children":[{"id":"back-to-old-school-commands","depth":3,"text":"Back to old school commands"}]},{"id":"what-to-do-next","depth":2,"text":"What to do next"}]}}}