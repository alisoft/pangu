{"key":"content:en:3.api:1.composables:use-cookie.md","generatedAt":"2022-07-23T14:35:18.259Z","mtime":"2022-07-23T14:35:18.234Z","slug":"use-cookie","title":"useCookie","position":"000300019999","to":"/api/composables/use-cookie","draft":false,"page":true,"language":"en","empty":false,"description":"Nuxt provides an SSR-friendly composable to read and write cookies.","body":{"raw":"# `useCookie`\n\nNuxt provides an SSR-friendly composable to read and write cookies.\n\nWithin your pages, components and plugins you can use `useCookie` to create a reactive reference bound to a specific cookie.\n\n```js\nconst cookie = useCookie(name, options)\n```\n\n::alert{icon=ðŸ‘‰}\n**`useCookie` only works during `setup` or `Lifecycle Hooks`**.\n::\n\n::alert{icon=ðŸ˜Œ}\n`useCookie` ref will automatically serialize and deserialize cookie value to JSON.\n::\n\n## Example\n\nThe example below creates a cookie called `counter`. If the cookie doesn't exist, it is initially set to a random value. Whenever we update the `counter` variable, the cookie will be updated accordingly.\n\n```vue\n<template>\n  <div>\n    <h1> Counter: {{ counter || '-' }}</h1>\n    <button @click=\"counter = null\">\n      reset\n    </button>\n    <button @click=\"counter--\">\n      -\n    </button>\n    <button @click=\"counter++\">\n      +\n    </button>\n  </div>\n</template>\n\n<script setup>\nconst counter = useCookie('counter')\ncounter.value = counter.value || Math.round(Math.random() * 1000)\n</script>\n```\n\n:button-link[Open on StackBlitz]{href=\"https://stackblitz.com/github/nuxt/framework/tree/main/examples/composables/use-cookie?terminal=dev&file=app.vue\" blank}\n\n## Options\n\nCookie composable accepts several options which let you modify the behavior of cookies.\n\nMost of the options will be directly passed to the [cookie](https://github.com/jshttp/cookie) package.\n\n### `maxAge` / `expires`\n\n**`maxAge`** Specifies the `number` (in seconds) to be the value for the [`Max-Age` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.2).\nThe given number will be converted to an integer by rounding down. By default, no maximum age is set.\n\n**`expires`**: Specifies the `Date` object to be the value for the [`Expires` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.1).\nBy default, no expiration is set. Most clients will consider this a \"non-persistent cookie\" and\nwill delete it on a condition like exiting a web browser application.\n\n::alert{icon=ðŸ’¡}\n**Note:** The [cookie storage model specification](https://tools.ietf.org/html/rfc6265#section-5.3) states that if both `expires` and\n`maxAge` is set, then `maxAge` takes precedence, but not all clients may obey this,\nso if both are set, they should point to the same date and time!\n::\n\n::alert\nIf neither of `expires` and `maxAge` is set, the cookie will be session-only and removed when the user closes their browser.\n::\n\n### `httpOnly`\n\nSpecifies the `boolean` value for the [`HttpOnly` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.6). When truthy,\nthe `HttpOnly` attribute is set; otherwise it is not. By default, the `HttpOnly` attribute is not set.\n\n::alert{icon=ðŸ’¡}\n**Note:** Be careful when setting this to `true`, as compliant clients will not allow client-side\nJavaScript to see the cookie in `document.cookie`.\n::\n\n### `secure`\n\nSpecifies the `boolean` value for the [`Secure` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.5). When truthy,\nthe `Secure` attribute is set; otherwise it is not. By default, the `Secure` attribute is not set.\n\n::alert{icon=ðŸ’¡}\n**Note:** Be careful when setting this to `true`, as compliant clients will not send the cookie back to\nthe server in the future if the browser does not have an HTTPS connection. This can lead to hydration errors.\n::\n\n### `domain`\n\nSpecifies the value for the [`Domain` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.3). By default, no\ndomain is set, and most clients will consider applying the cookie only to the current domain.\n\n### `path`\n\nSpecifies the value for the [`Path` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.4). By default, the path\nis considered the [\"default path\"](https://tools.ietf.org/html/rfc6265#section-5.1.4).\n\n### `sameSite`\n\nSpecifies the `boolean` or `string` value for the [`SameSite` `Set-Cookie` attribute](https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.2.7).\n\n- `true` will set the `SameSite` attribute to `Strict` for strict same-site enforcement.\n- `false` will not set the `SameSite` attribute.\n- `'lax'` will set the `SameSite` attribute to `Lax` for lax same-site enforcement.\n- `'none'` will set the `SameSite` attribute to `None` for an explicit cross-site cookie.\n- `'strict'` will set the `SameSite` attribute to `Strict` for strict same-site enforcement.\n\nMore information about the different enforcement levels can be found in [the specification](https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.2.7).\n\n### `encode`\n\nSpecifies a function that will be used to encode a cookie's value. Since the value of a cookie\nhas a limited character set (and must be a simple string), this function can be used to encode\na value into a string suited for a cookie's value.\n\nThe default encoder is the `JSON.stringify` + `encodeURIComponent`.\n\n### `decode`\n\nSpecifies a function that will be used to decode a cookie's value. Since the value of a cookie\nhas a limited character set (and must be a simple string), this function can be used to decode\na previously encoded cookie value into a JavaScript string or other object.\n\nThe default decoder is `decodeURIComponent` + [destr](https://github.com/unjs/destr).\n\n::alert{icon=ðŸ’¡}\n**Note:** If an error is thrown from this function, the original, non-decoded cookie value will\nbe returned as the cookie's value.\n::\n\n### `default`\n\nSpecifies a function that returns the cookie's default value. The function can also return a `Ref`.\n\n## Handling cookies in API routes\n\nYou can use `useCookie` and `setCookie` from [`h3`](https://github.com/unjs/h3) package to set cookies in server API routes.\n\n**Example:**\n\n```js\nexport default defineEventHandler(event => {\n  // Read counter cookie\n  let counter = useCookie(event, 'counter') || 0\n\n  // Increase counter cookie by 1\n  setCookie(event, 'counter', ++counter)\n\n  // Send JSON response\n  return { counter }\n})\n```\n\n:LinkExample{link=\"/examples/composables/use-cookie\"}\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"usecookie"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useCookie"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Nuxt provides an SSR-friendly composable to read and write cookies."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Within your pages, components and plugins you can use "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useCookie"}]},{"type":"text","value":" to create a reactive reference bound to a specific cookie."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" cookie "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"useCookie"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"name"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" options"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"ðŸ‘‰"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useCookie"}]},{"type":"text","value":" only works during "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"setup"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Lifecycle Hooks"}]}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"ðŸ˜Œ"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useCookie"}]},{"type":"text","value":" ref will automatically serialize and deserialize cookie value to JSON."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"example"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#example"},"children":[{"type":"text","value":"Example"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"The example below creates a cookie called "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"counter"}]},{"type":"text","value":". If the cookie doesn't exist, it is initially set to a random value. Whenever we update the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"counter"}]},{"type":"text","value":" variable, the cookie will be updated accordingly."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-html"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" Counter: {{ counter || '-' }}"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"h1"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"button"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","attr-name"]},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"className":["token","attr-value"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation","attr-equals"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":"counter = null"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n      reset\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"button"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","attr-name"]},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"className":["token","attr-value"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation","attr-equals"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":"counter--"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n      -\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"button"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","attr-name"]},"children":[{"type":"text","value":"@click"}]},{"type":"element","tag":"span","props":{"className":["token","attr-value"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation","attr-equals"]},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]},{"type":"text","value":"counter++"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"\""}]}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n      +\n    "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"button"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n\n"},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"script"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","attr-name"]},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"element","tag":"span","props":{"className":["token","script"]},"children":[{"type":"element","tag":"span","props":{"className":["token","language-javascript"]},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"const"}]},{"type":"text","value":" counter "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"useCookie"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'counter'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\ncounter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" counter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"value"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"||"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","known-class-name","class-name"]},"children":[{"type":"text","value":"Math"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"round"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","known-class-name","class-name"]},"children":[{"type":"text","value":"Math"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","method","function","property-access"]},"children":[{"type":"text","value":"random"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"</"}]},{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"button-link","props":{":blank":"true","href":"https://stackblitz.com/github/nuxt/framework/tree/main/examples/composables/use-cookie?terminal=dev&file=app.vue"},"children":[{"type":"text","value":"Open on StackBlitz"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"options"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#options"},"children":[{"type":"text","value":"Options"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Cookie composable accepts several options which let you modify the behavior of cookies."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Most of the options will be directly passed to the "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/jshttp/cookie","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"cookie"}]},{"type":"text","value":" package."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"maxage--expires"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#maxage--expires"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"maxAge"}]},{"type":"text","value":" / "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"expires"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"maxAge"}]}]},{"type":"text","value":" Specifies the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"number"}]},{"type":"text","value":" (in seconds) to be the value for the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.2.2","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Max-Age"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":".\nThe given number will be converted to an integer by rounding down. By default, no maximum age is set."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"expires"}]}]},{"type":"text","value":": Specifies the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Date"}]},{"type":"text","value":" object to be the value for the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.2.1","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Expires"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":".\nBy default, no expiration is set. Most clients will consider this a \"non-persistent cookie\" and\nwill delete it on a condition like exiting a web browser application."}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"ðŸ’¡"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" The "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.3","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"cookie storage model specification"}]},{"type":"text","value":" states that if both "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" and\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"maxAge"}]},{"type":"text","value":" is set, then "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"maxAge"}]},{"type":"text","value":" takes precedence, but not all clients may obey this,\nso if both are set, they should point to the same date and time!"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"If neither of "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"expires"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"maxAge"}]},{"type":"text","value":" is set, the cookie will be session-only and removed when the user closes their browser."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"httponly"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#httponly"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"httpOnly"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" value for the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.2.6","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"HttpOnly"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":". When truthy,\nthe "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"HttpOnly"}]},{"type":"text","value":" attribute is set; otherwise it is not. By default, the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"HttpOnly"}]},{"type":"text","value":" attribute is not set."}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"ðŸ’¡"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Be careful when setting this to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":", as compliant clients will not allow client-side\nJavaScript to see the cookie in "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"document.cookie"}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"secure"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#secure"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"secure"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" value for the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.2.5","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Secure"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":". When truthy,\nthe "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Secure"}]},{"type":"text","value":" attribute is set; otherwise it is not. By default, the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Secure"}]},{"type":"text","value":" attribute is not set."}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"ðŸ’¡"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" Be careful when setting this to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":", as compliant clients will not send the cookie back to\nthe server in the future if the browser does not have an HTTPS connection. This can lead to hydration errors."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"domain"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#domain"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"domain"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies the value for the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.2.3","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Domain"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":". By default, no\ndomain is set, and most clients will consider applying the cookie only to the current domain."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"path"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#path"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"path"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies the value for the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.2.4","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Path"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":". By default, the path\nis considered the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/rfc6265#section-5.1.4","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"\"default path\""}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"samesite"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#samesite"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"sameSite"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" or "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"string"}]},{"type":"text","value":" value for the "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.2.7","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"SameSite"}]},{"type":"text","value":" "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Set-Cookie"}]},{"type":"text","value":" attribute"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"true"}]},{"type":"text","value":" will set the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"SameSite"}]},{"type":"text","value":" attribute to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Strict"}]},{"type":"text","value":" for strict same-site enforcement."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"false"}]},{"type":"text","value":" will not set the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"SameSite"}]},{"type":"text","value":" attribute."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"'lax'"}]},{"type":"text","value":" will set the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"SameSite"}]},{"type":"text","value":" attribute to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Lax"}]},{"type":"text","value":" for lax same-site enforcement."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"'none'"}]},{"type":"text","value":" will set the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"SameSite"}]},{"type":"text","value":" attribute to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"None"}]},{"type":"text","value":" for an explicit cross-site cookie."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"'strict'"}]},{"type":"text","value":" will set the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"SameSite"}]},{"type":"text","value":" attribute to "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Strict"}]},{"type":"text","value":" for strict same-site enforcement."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"More information about the different enforcement levels can be found in "},{"type":"element","tag":"prose-a","props":{"href":"https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.2.7","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"the specification"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"encode"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#encode"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"encode"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies a function that will be used to encode a cookie's value. Since the value of a cookie\nhas a limited character set (and must be a simple string), this function can be used to encode\na value into a string suited for a cookie's value."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"The default encoder is the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"JSON.stringify"}]},{"type":"text","value":" + "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"encodeURIComponent"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"decode"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#decode"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"decode"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies a function that will be used to decode a cookie's value. Since the value of a cookie\nhas a limited character set (and must be a simple string), this function can be used to decode\na previously encoded cookie value into a JavaScript string or other object."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"The default decoder is "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"decodeURIComponent"}]},{"type":"text","value":" + "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/unjs/destr","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"destr"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"ðŸ’¡"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" If an error is thrown from this function, the original, non-decoded cookie value will\nbe returned as the cookie's value."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"default"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#default"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"default"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Specifies a function that returns the cookie's default value. The function can also return a "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"Ref"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"handling-cookies-in-api-routes"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#handling-cookies-in-api-routes"},"children":[{"type":"text","value":"Handling cookies in API routes"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can use "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"useCookie"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"setCookie"}]},{"type":"text","value":" from "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/unjs/h3","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"h3"}]}]},{"type":"text","value":" package to set cookies in server API routes."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Example:"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"defineEventHandler"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"className":["token","parameter"]},"children":[{"type":"text","value":"event"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","arrow","operator"]},"children":[{"type":"text","value":"=>"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Read counter cookie"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"let"}]},{"type":"text","value":" counter "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"useCookie"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"event"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'counter'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"||"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":"\n\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Increase counter cookie by 1"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"setCookie"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"event"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'counter'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"++"}]},{"type":"text","value":"counter"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\n  "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// Send JSON response"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","keyword","control-flow"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" counter "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"link-example","props":{"link":"/examples/composables/use-cookie"},"children":[]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"example","depth":2,"text":"Example"},{"id":"options","depth":2,"text":"Options","children":[{"id":"maxage--expires","depth":3,"text":"maxAge / expires"},{"id":"httponly","depth":3,"text":"httpOnly"},{"id":"secure","depth":3,"text":"secure"},{"id":"domain","depth":3,"text":"domain"},{"id":"path","depth":3,"text":"path"},{"id":"samesite","depth":3,"text":"sameSite"},{"id":"encode","depth":3,"text":"encode"},{"id":"decode","depth":3,"text":"decode"},{"id":"default","depth":3,"text":"default"}]},{"id":"handling-cookies-in-api-routes","depth":2,"text":"Handling cookies in API routes"}]}}}